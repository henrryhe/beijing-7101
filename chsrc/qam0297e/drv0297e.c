/* -------------------------------------------------------------------------
File Name   : drv0297e.c

Description : STV0297E front-end driver routines.

Copyright (C) 1999-2006 STMicroelectronics
---------------------------------------------------------------------------- */
 

/* Includes ---------------------------------------------------------------- */

#ifndef ST_OSLINUX
/* C libs */
#include <string.h>
#include "math.h"

#endif
#include "stlite.h"   /* Standard includes */ 
#include "sttbx.h"
                 
#include "stddefs.h"

/* STAPI */
#include "sti2c.h"
#include "stcommon.h"

#include "stevt.h"
#include "chip.h"


#include "d0297e.h"     /* top level header for this driver */
#include "drv0297e.h"   /* header for this file */
#include "tcdrv.h"
#include "stos.h"
#include "ch_tuner_mid.h"


/* Current LLA revision	*/
static const ST_Revision_t Revision297e  = "STB0297E-LLA_REL_1.2";


#define RF_LOOKUP_TABLE_SIZE  31
#define RF_LOOKUP_TABLE2_SIZE 16
/* RF Level (for RF AGC->AGC1) Lookup Table, depends on the board and tuner.*/
S32 FE_297e_RF_LookUp1[RF_LOOKUP_TABLE_SIZE][RF_LOOKUP_TABLE_SIZE] = {
/*AGC1*/	{ 48, 50, 51, 53, 54, 56, 57, 58, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69,
	 		  70, 71, 72, 73, 74, 75, 76, 77, 78, 80, 83, 85, 88 },
/*RF(dbm)*/	{ 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
			  41, 42, 43, 44, 46, 47, 49, 50, 52, 53, 54, 55, 56 }
};

/* RF Level (for IF AGC->AGC2) Lookup Table, depends on the board and tuner.*/
S32 FE_297e_RF_LookUp2[RF_LOOKUP_TABLE2_SIZE][RF_LOOKUP_TABLE2_SIZE] = {   
/*AGC2*/	{ 28, 29, 31, 32, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45 },
/*RF(dbm)*/	{ 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72 }
};


static char l1d8[256] =	/* Lookup table to evaluate exponent*/
 {
     8, 7, 6, 6, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4, 
     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
	 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
	 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
	 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
	 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
	 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
};


static S32 AllPass [900][8] =/*  c[1]		,c[2]		,c[3]		,c[4]		,c[5]		,c[6]		,c[7]		,c[8]  */
						{
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14273271,	63865060,	65886808,	51042037,	65094171,	16460117,	14926229,	8738063,
							14326006,	64241793,	66408383,	51495527,	65889625,	16697507,	15164416,	8898845,
							14277264,	63900436,	65945063,	51100583,	65210420,	16498771,	14968905,	8769445,
							14229297,	63565627,	65492149,	50715797,	64550891,	16306437,	14780324,	8645050,
							14205457,	63408172,	65291470,	50555960,	64295534,	16237501,	14718269,	8607844,
							14205457,	63408172,	65291470,	50555960,	64295534,	16237501,	14718269,	8607844,
							14205457,	63408172,	65291470,	50555960,	64295534,	16237501,	14718269,	8607844,
							14152268,	63037189,	64789857,	50129887,	63565192,	16024445,	14509246,	8469846,
							14206313,	63425070,	65329402,	50601260,	64396078,	16273653,	14760574,	8640388,
							14206313,	63425070,	65329402,	50601260,	64396078,	16273653,	14760574,	8640388,
							14153526,	63057407,	64832949,	50180118,	63675098,	16063586,	14554729,	8504647,
							14124724,	62858414,	64566427,	49955876,	63294372,	15953581,	14447844,	8434763,
							14096848,	62666453,	64310177,	49740996,	62930772,	15848881,	14346461,	8368707,
							14123848,	62859836,	64578686,	49975206,	63343047,	15972393,	14470908,	8453091,
							14066461,	62460787,	64040575,	49519202,	62562960,	15745202,	14248310,	8306274,
							14063699,	62444913,	64023723,	49508834,	62552015,	15744021,	14249149,	8308163,
							14061982,	62436696,	64017742,	49508161,	62558513,	15748181,	14255486,	8313863,
							14060618,	62430998,	64015246,	49510510,	62570289,	15753907,	14263384,	8320607,
							13997239,	61995008,	63433643,	49022977,	61745342,	15516288,	14033150,	8170457,
							13997239,	61995008,	63433643,	49022977,	61745342,	15516288,	14033150,	8170457,
							13994720,	61981248,	63420195,	49015948,	61740860,	15517204,	14036250,	8173972,
							14021467,	62172156,	63684442,	49245799,	62144472,	15637863,	14157603,	8256137,
							13957921,	61731822,	63092495,	48745535,	61290683,	15389703,	13914860,	8096240,
							13953380,	61703795,	63059503,	48721664,	61256874,	15381919,	13909270,	8093910,
							13949529,	61680762,	63033506,	48703945,	61233985,	15377431,	13907027,	8093868,
							13945643,	61657675,	63007725,	48686673,	61212352,	15373466,	13905466,	8094398,
							13909851,	61411904,	62680298,	48412427,	60748451,	15239819,	13775884,	8009787,
							13905666,	61386751,	62651698,	48392703,	60722450,	15234513,	13772921,	8009321,
							13901354,	61360753,	62622007,	48372093,	60694997,	15228801,	13769576,	8008614,
							13894947,	61319777,	62571543,	48333369,	60635652,	15213527,	13756587,	8001357,
							13857164,	61060726,	62226873,	48044996,	60148281,	15073212,	13620601,	7912586,
							13851832,	61027721,	62187828,	48016518,	60107443,	15063617,	13613463,	7909381,
							13813243,	60763715,	61837301,	47723842,	59613788,	14921771,	13476260,	7819990,
							13838895,	60945642,	62087656,	47940470,	59992400,	15034490,	13589222,	7896241,
							13833323,	60911158,	62046856,	47910701,	59949679,	15024440,	13581729,	7892863,
							13792402,	60630897,	61674255,	47599106,	59423149,	14872830,	13434733,	7796836,
							13785939,	60590294,	61625264,	47562419,	59368590,	14859320,	13423828,	7791187,
							13743766,	60301947,	61242524,	47242818,	58829275,	14704227,	13273631,	7693174,
							13735830,	60250996,	61179384,	47193924,	58753372,	14684340,	13256294,	7683143,
							13728784,	60206640,	61125713,	47153573,	58693034,	14669284,	13244003,	7676665,
							13720212,	60151329,	61056754,	47099787,	58608809,	14646983,	13224309,	7665083,
							13711730,	60096728,	60988862,	47046992,	58526421,	14625256,	13205211,	7653917,
							13702810,	60039155,	60917044,	46990930,	58438539,	14601954,	13184594,	7641763,
							13693668,	59980058,	60843197,	46933164,	58347752,	14577807,	13163147,	7629060,
							13683948,	59916910,	60763812,	46870625,	58248639,	14551179,	13139207,	7614666,
							13674790,	59857941,	60690442,	46813517,	58159407,	14527610,	13118451,	7602502,
							13664883,	59793684,	60609812,	46750122,	58059159,	14500746,	13094369,	7588075,
							13654574,	59726673,	60525505,	46683636,	57953648,	14472353,	13068794,	7572664,
							13644636,	59662450,	60445241,	46620817,	57854830,	14446035,	13045376,	7558761,
							13595365,	59326798,	60001020,	46250710,	57231259,	14266867,	12871899,	7445503,
							13583990,	59252672,	59907443,	46176583,	57112953,	14234804,	12842757,	7427745,
							13572400,	59177131,	59812067,	46101017,	56992319,	14202098,	12813021,	7409617,
							13561874,	59109241,	59727335,	46034749,	56888072,	14174308,	12788242,	7394852,
							13549241,	59026475,	59622195,	45950850,	56753021,	14137337,	12754244,	7373848,
							13537466,	58950059,	59526159,	45875149,	56632865,	14104976,	12725048,	7356212,
							13524213,	58863129,	59415569,	45786743,	56490245,	14065831,	12688938,	7333820,
							13510819,	58775321,	59303896,	45697485,	56346249,	14026300,	12652455,	7311178,
							13497551,	58688601,	59193988,	45609981,	56205710,	13987916,	12617240,	7289476,
							13484876,	58606150,	59090025,	45527665,	56074294,	13952258,	12584764,	7269624,
							13470600,	58512500,	58970811,	45432261,	55920139,	13909856,	12545542,	7245218,
							13456245,	58418468,	58851302,	45336786,	55766168,	13867597,	12506549,	7221024,
							13481901,	58598487,	59096757,	45547530,	56132169,	13976026,	12614831,	7293962,
							13428178,	58235404,	58619712,	45152695,	55470898,	13787041,	12432715,	7175556,
							13412576,	58132925,	58489023,	45047856,	55300987,	13740133,	12389131,	7148292,
							13397773,	58036223,	58366426,	44950129,	55143678,	13697025,	12349402,	7123662,
							13382000,	57932902,	58235046,	44845062,	54973961,	13650339,	12306199,	7096757,
							13407199,	58109196,	58474771,	45050376,	55329729,	13755522,	12411046,	7167267,
							13391518,	58006477,	58344127,	44945848,	55160758,	13708993,	12367926,	7140365,
							13332753,	57610121,	57824204,	44516045,	54441517,	13503531,	12169944,	7011603,
							13359241,	57795265,	58075786,	44731405,	54814574,	13613812,	12279883,	7085556,
							13341373,	57677582,	57925167,	44610027,	54616754,	13558831,	12228392,	7053046,
							13324881,	57569879,	57788588,	44501069,	54441139,	13510617,	12183851,	7025350,
							13306529,	57449203,	57634384,	44377002,	54239274,	13454611,	12131500,	6992369,
							13288743,	57332637,	57485947,	44258001,	54046364,	13401294,	12081861,	6961224,
							13270066,	57210083,	57329667,	44132524,	53842631,	13344888,	12029252,	6928154,
							13251991,	57091903,	57179528,	44012443,	53648441,	13291351,	11979538,	6897049,
							13232174,	56961687,	57013198,	43878626,	53430645,	13230885,	11922962,	6861356,
							13258845,	57147545,	57265095,	44093785,	53802698,	13340719,	12032348,	6934893,
							13238203,	57011537,	57090827,	43953091,	53572810,	13276616,	11972073,	6896659,
							13218940,	56885475,	56930459,	43824602,	53364564,	13219049,	11918449,	6862982,
							13199334,	56757214,	56767343,	43693943,	53152839,	13160529,	11863938,	6828751,
							13179287,	56626042,	56600458,	43560185,	52935915,	13100506,	11807953,	6793533,
							13157124,	56480202,	56413771,	43409550,	52689828,	13031871,	11743379,	6752529,
							13137049,	56349395,	56248079,	43277366,	52476530,	12973173,	11688957,	6718522,
							13161509,	56519081,	56477115,	43472268,	52812412,	13072027,	11787139,	6784369,
							13139950,	56377819,	56297061,	43327620,	52577166,	13006720,	11725990,	6745735,
							13118522,	56237769,	56119021,	43184984,	52345871,	12942709,	11666255,	6708129,
							13096155,	56091310,	55932433,	43035128,	52102169,	12875042,	11602873,	6668059,
							13073544,	55943392,	55744151,	42884032,	51856632,	12806911,	11539092,	6627755,
							13098384,	56115501,	55976247,	43081430,	52196756,	12907033,	11638591,	6694550,
							13075198,	55963665,	55782744,	42925930,	51943666,	12836684,	11572606,	6652765,
							13052365,	55814692,	55593635,	42774607,	51698515,	12768887,	11509374,	6612974,
							13028434,	55658170,	55394367,	42614610,	51438281,	12696587,	11441579,	6570047,
							13004060,	55498827,	55191587,	42451842,	51173593,	12623058,	11372633,	6526388,
							13028687,	55669053,	55420670,	42646334,	51508214,	12721443,	11470318,	6591925,
							13003903,	55506986,	55214334,	42480620,	51238553,	12646471,	11399953,	6547320,
							12979579,	55348362,	55012937,	42319317,	50976795,	12573899,	11332032,	6504386,
							12954419,	55184308,	54804678,	42152547,	50706219,	12498902,	11261866,	6460055,
							12978666,	55351581,	55029395,	42343042,	51033534,	12595033,	11357226,	6523986,
							12952410,	55179940,	54810859,	42167452,	50747563,	12515428,	11282390,	6476448,
							12925932,	55007106,	54591140,	41991188,	50460961,	12435785,	11207655,	6429068,
							12898865,	54830466,	54366583,	41811013,	50167897,	12354300,	11131133,	6380506,
							12924443,	55006705,	54603109,	42011360,	50511937,	12455303,	11231304,	6447660,
							12896972,	54827423,	54375173,	41828440,	50214331,	12372529,	11153541,	6398290,
							12868822,	54643709,	54141563,	41640902,	49909045,	12287554,	11073633,	6347495,
							12894715,	54822005,	54380758,	41843481,	50256957,	12389731,	11175032,	6415534,
							12866213,	54636091,	54144449,	41653844,	49948345,	12303852,	11094289,	6364215,
							12836792,	54444026,	53900072,	41457481,	49628302,	12214633,	11010233,	6310668,
							12808778,	54262095,	53669831,	41273509,	49330191,	12132030,	10932901,	6261729,
							12833053,	54428884,	53893152,	41462321,	49653979,	12227002,	11027053,	6324853,
							12802679,	54230747,	53641179,	41259914,	49324101,	12135024,	10940362,	6269589,
							12773354,	54040298,	53400084,	41067151,	49011461,	12048290,	10859038,	6218028,
							12742771,	53841607,	53148443,	40865856,	48684806,	11957616,	10773974,	6164068,
							12767865,	54013569,	53378126,	41059604,	49016355,	12054673,	10870014,	6228345,
							12735969,	53805858,	53114346,	40847942,	48671662,	11958611,	10779491,	6170635,
							12705433,	53608041,	52864487,	40648573,	48348882,	11869203,	10695772,	6117616,
							12729109,	53770007,	53080496,	40830559,	48659994,	11960210,	10785786,	6177850,
							12698105,	53569177,	52826826,	40628121,	48332158,	11869366,	10700680,	6123920,
							12664641,	53351677,	52551053,	40407113,	47972580,	11769217,	10606333,	6063768,
							12689642,	53522599,	52778906,	40599026,	48300627,	11865182,	10701267,	6127315,
							12656627,	53308599,	52508333,	40382827,	47949973,	11767845,	10609897,	6069287,
							12623299,	53092710,	52235489,	40164846,	47596380,	11669645,	10517641,	6010626,
							12646997,	53254415,	52450691,	40345837,	47905370,	11759942,	10606895,	6070336,
							12613497,	53037658,	52177049,	40127454,	47551507,	11661774,	10514773,	6011827,
							12579355,	52816902,	51898505,	39905237,	47191485,	11561894,	10421018,	5952252,
							12602596,	52975171,	52108751,	40081768,	47492419,	11649722,	10507733,	6010207,
							12568286,	52753606,	51829530,	39859285,	47132418,	11549976,	10414233,	5950879,
							12532847,	52524668,	51540847,	39629067,	46759484,	11446502,	10317072,	5889105,
							12556362,	52684616,	51753125,	39807176,	47062949,	11535040,	10404475,	5947521,
							12520786,	52455094,	51464066,	39576938,	46690432,	11431806,	10307658,	5886042,
							12544172,	52614107,	51675061,	39753961,	46992072,	11519833,	10394593,	5944179,
							12507490,	52377193,	51376284,	39515589,	46605637,	11412496,	10293661,	5879893,
							12470488,	52138650,	51076003,	39276450,	46218658,	11305204,	10192957,	5815874,
							12495223,	52306692,	51298831,	39463311,	46536969,	11398084,	10284690,	5877233,
							12457512,	52063605,	50992813,	39219556,	46142390,	11288636,	10181905,	5811848,
							12481306,	52225172,	51206973,	39399111,	46448243,	11377892,	10270083,	5870854,
							12442575,	51975331,	50892150,	39148035,	46041200,	11264782,	10163634,	5802971,
							12403481,	51723602,	50575496,	38895916,	45633119,	11151558,	10057234,	5735217,
							12428553,	51893659,	50800714,	39084616,	45954396,	11245289,	10149823,	5797178,
							12388517,	51635780,	50476151,	38826009,	45535421,	11128908,	10040310,	5727333,
							12411930,	51794340,	50685845,	39001478,	45833825,	11215877,	10126144,	5784733,
							12371421,	51533606,	50357890,	38740295,	45410825,	11098405,	10015614,	5714234,
							12396376,	51702727,	50581737,	38927789,	45730039,	11191557,	10107680,	5775897,
							12355477,	51439756,	50251280,	38664846,	45304548,	11073490,	9996680,	5705158,
							12313742,	51171651,	49914621,	38397120,	44871477,	10953341,	9883719,	5633152,
							12338175,	51336774,	50132614,	38579267,	45180878,	11043434,	9972578,	5692551,
							12295927,	51065598,	49792340,	38308832,	44743656,	10922188,	9858631,	5619940,
							12319197,	51222716,	49999604,	38481914,	45037545,	11007748,	9943023,	5676367,
							12276956,	50951922,	49660173,	38212382,	44602073,	10887042,	9829609,	5604095,
							12234060,	50677530,	49316991,	37940494,	44163843,	10765877,	9716067,	5531949,
							12256843,	50830935,	49518843,	38108664,	44448782,	10848671,	9797588,	5586373,
							12213641,	50554752,	49173549,	37835127,	44007803,	10726682,	9683176,	5513584,
							12236840,	50710975,	49379167,	38006515,	44298387,	10811189,	9766470,	5569260,
							12192984,	50430792,	49029038,	37729239,	43851457,	10687555,	9650501,	5495459,
							12215596,	50582822,	49228835,	37895533,	44133010,	10769325,	9730992,	5549193,
							12171291,	50300093,	48875891,	37616287,	43683279,	10645010,	9614459,	5475076,
							12125041,	50004891,	48507226,	37324432,	43212886,	10514864,	9492331,	5397309,
							12148963,	50165510,	48718074,	37499768,	43509555,	10600987,	9577090,	5453893,
							12101996,	49865927,	48344124,	37203827,	43032654,	10469040,	9453251,	5375009,
							12125885,	50026203,	48554398,	37378610,	43328299,	10554852,	9537702,	5431393,
							12077813,	49719578,	48171573,	37075502,	42839497,	10419480,	9410490,	5350237,
							12102013,	49881906,	48384524,	37252530,	43139027,	10506461,	9496146,	5407472,
							12054426,	49579122,	48007395,	36954621,	42659683,	10373996,	9371930,	5328391,
							12076973,	49730030,	48204961,	37118540,	42936524,	10454249,	9450830,	5381031,
							12029248,	49426990,	47828268,	36821568,	42459642,	10322732,	9327761,	5302850,
							12052007,	49579266,	48027590,	36986945,	42738996,	10403743,	9407450,	5356056,
							12002607,	49265282,	47636777,	36678322,	42242383,	10266448,	9278603,	5273932,
							12025679,	49419593,	47838724,	36845877,	42525460,	10348564,	9359419,	5327922,
							11975482,	49100811,	47442199,	36532893,	42021989,	10209394,	9228811,	5244663,
							11999932,	49264246,	47655999,	36710231,	42321544,	10296285,	9314328,	5301802,
							11948615,	48938539,	47251009,	36390623,	41807408,	10154138,	9180873,	5216676,
							11971559,	49091728,	47451208,	36556546,	42087515,	10235357,	9260796,	5270082,
							11920179,	48766246,	47047253,	36238329,	41576513,	10094319,	9128608,	5185909,
							11943994,	48925131,	47254755,	36410202,	41866513,	10178367,	9211281,	5241132,
							11891498,	48592689,	46842185,	36085130,	41344252,	10034110,	9075929,	5154822,
							11914143,	48743536,	47038930,	36247915,	41618674,	10113591,	9154077,	5207013,
							11861001,	48407459,	46622356,	35920048,	41092440,	9968366,	9017926,	5120259,
							11884305,	48562514,	46824372,	36087021,	41373644,	10049733,	9097852,	5173587,
							11831328,	48228305,	46411119,	35762551,	40854122,	9906711,	8964103,	5088582,
							11853187,	48373549,	46600121,	35918606,	41116713,	9982641,	9038652,	5138309,
							11799528,	48035384,	46182294,	35590699,	40591774,	9838105,	8903418,	5052285,
							11821997,	48184575,	46376335,	35750870,	40861275,	9916045,	8979967,	5103374,
							11766348,	47833760,	45942643,	35410252,	40315449,	9765577,	8838987,	5013551,
							11789541,	47987570,	46142463,	35575007,	40592350,	9845566,	8917455,	5065855,
							11733221,	47633056,	45704782,	35231669,	40042765,	9694211,	8775770,	4975656,
							11755672,	47781814,	45897929,	35390882,	40310371,	9771546,	8851695,	5026325,
							11778996,	47936535,	46099040,	35556837,	40589601,	9852322,	8931075,	5079349,
							11721710,	47575985,	45653855,	35207488,	40030056,	9698094,	8786542,	4987214,
							11744954,	47729984,	45853817,	35372348,	40307240,	9778232,	8865262,	5039782,
							11686472,	47362159,	45399847,	35016169,	39736714,	9620925,	8717755,	4945668,
							11709974,	47517755,	45601783,	35182610,	40016535,	9701835,	8797258,	4998786,
							11650612,	47144885,	45142105,	34822296,	39439840,	9542928,	8648322,	4903795,
							11673945,	47299132,	45342007,	34986847,	39716150,	9622733,	8726659,	4956082,
							11614054,	46923666,	44879982,	34625328,	39138498,	9463821,	8577956,	4861389,
							11637305,	47077180,	45078722,	34788776,	39412763,	9542995,	8655648,	4913240,
							11575921,	46692512,	44605419,	34418354,	38820572,	9379943,	8502888,	4815812,
							11599426,	46847558,	44806003,	34583237,	39097161,	9459778,	8581231,	4868107,
							11621060,	46990110,	44990218,	34734492,	39350590,	9532840,	8652840,	4915848,
							11560496,	46611622,	44525758,	34371928,	38772418,	9374040,	8504424,	4821416,
							11582184,	46754366,	44710049,	34523136,	39025641,	9447021,	8575947,	4869105,
							11520515,	46369439,	44238152,	34155051,	38438996,	9285952,	8425436,	4773339,
							11543952,	46523792,	44437601,	34318876,	38713714,	9365253,	8503294,	4825360,
							11480904,	46130537,	43955700,	33943043,	38114638,	9200700,	8349415,	4727349,
							11502545,	46272577,	44138636,	34092822,	38365016,	9272753,	8419942,	4774330,
							11524652,	46417953,	44326265,	34246795,	38623043,	9347206,	8493032,	4823172,
							11460624,	46018848,	43837396,	33865593,	38015370,	9180243,	8336818,	4723600,
							11483251,	46167382,	44028767,	34022370,	38277654,	9255798,	8410865,	4772999,
							11419080,	45768518,	43541545,	33643485,	37675303,	9090744,	8256856,	4675102,
							11440508,	45908857,	43721980,	33791029,	37921738,	9161634,	8326251,	4721354,
							11374612,	45499466,	43221960,	33402106,	37303071,	8991947,	8167708,	4620401,
							11397762,	45651131,	43417065,	33561766,	37569999,	9068820,	8243057,	4670694,
							11419148,	45791092,	43596923,	33708789,	37815524,	9139448,	8312204,	4716792,
							11352084,	45374671,	43088462,	33313311,	37186288,	8966782,	8150763,	4613896,
							11374963,	45524412,	43280947,	33470743,	37449409,	9042551,	8225041,	4663493,
							11306953,	45102856,	42767012,	33071542,	36814969,	8868619,	8062534,	4559972,
							11329700,	45251502,	42957823,	33227419,	37075239,	8943511,	8135915,	4608957,
							11351608,	45394738,	43141807,	33377832,	37326587,	9015901,	8206910,	4656396,
							11282247,	44964992,	42617959,	32970868,	36679529,	8838383,	8040890,	4550504,
							11304861,	45112614,	42807290,	33125429,	36937462,	8912573,	8113561,	4599006,
							11235070,	44681360,	42282939,	32719065,	36292863,	8736128,	7948905,	4494208,
							11257355,	44826506,	42468717,	32870443,	36545054,	8808555,	8019752,	4541435,
							11278888,	44966862,	42648518,	33017091,	36789619,	8878871,	8088618,	4587402,
							11209002,	44535868,	42125395,	32612300,	36148378,	8703550,	7925174,	4483464,
							11230404,	44675112,	42303478,	32757338,	36389964,	8772940,	7993079,	4528763,
							11159344,	44237619,	41773222,	32347507,	35741333,	8595714,	7827925,	4423750,
							11180562,	44375360,	41949028,	32490423,	35978969,	8663858,	7894509,	4468104,
							11201518,	44511455,	42122797,	32631737,	36214033,	8731291,	7960425,	4512031,
							11129534,	44068859,	41586938,	32217926,	35559509,	8552528,	7793870,	4406126,
							11151883,	44213959,	41772198,	32368613,	35810262,	8624505,	7864284,	4453097,
							11172947,	44350693,	41946753,	32510584,	36046522,	8692333,	7930657,	4497392,
							11099915,	43902206,	41404293,	32091989,	35384786,	8511661,	7762351,	4390373,
							11120927,	44038341,	41577797,	32232903,	35619002,	8578833,	7828030,	4434180,
							11045450,	43575164,	41017757,	31800722,	34935481,	8392050,	7653801,	4323194,
							11067851,	43720237,	41202617,	31950866,	35185102,	8463676,	7723883,	4369977,
							11088986,	43857079,	41376952,	32092434,	35420429,	8531191,	7789936,	4414069,
							11012800,	43390150,	40812932,	31657488,	34732835,	8343327,	7614683,	4302394,
							11034169,	43528314,	40988749,	31800136,	34969812,	8411292,	7681171,	4346784,
							10957212,	43057955,	40422049,	31364187,	34282224,	8223846,	7506684,	4235831,
							10979206,	43199855,	40602258,	31510114,	34524194,	8293115,	7574324,	4280908,
							11000435,	43336918,	40776461,	31651306,	34758547,	8360278,	7639985,	4324719,
							10921984,	42857839,	40199555,	31207583,	34058583,	8169360,	7462112,	4211476,
							10943938,	42999324,	40379086,	31352881,	34299436,	8238307,	7529453,	4256375,
							10964978,	43134986,	40551337,	31492393,	34530914,	8304644,	7594326,	4299692,
							10886522,	42657091,	39977166,	31051672,	33836929,	8115650,	7418476,	4187853,
							10907409,	42791470,	40147450,	31189352,	34065026,	8180936,	7482259,	4230413,
							10928597,	42927977,	40320689,	31329637,	34297808,	8247669,	7547563,	4274056,
							10848886,	42443101,	39738755,	30883304,	33595334,	8056406,	7369591,	4160832,
							10869395,	42574768,	39905276,	31017701,	33817624,	8119933,	7431569,	4202132,
							10890604,	42711259,	40078354,	31157781,	34050003,	8186552,	7496777,	4245734,
							10809278,	42217072,	39485658,	30703364,	33334851,	7991789,	7315453,	4130284,
							10830394,	42352641,	39657193,	30841921,	33564296,	8057461,	7379643,	4173151,
							10852221,	42492954,	39834950,	30985681,	33802649,	8125769,	7446495,	4217857,
							10769393,	41990172,	39232398,	30523918,	33076059,	7927871,	7262184,	4100430,
							10791282,	42130574,	39409914,	30667229,	33313294,	7995763,	7328546,	4144758,
							10812338,	42265504,	39580374,	30804739,	33540760,	8060813,	7392086,	4187170,
							10728093,	41755114,	38969696,	30337363,	32806084,	7860857,	7205936,	4068587,
							10748875,	41888117,	39137544,	30472663,	33029796,	7924826,	7268436,	4110333,
							10769555,	42020545,	39304762,	30607527,	33252896,	7988648,	7330813,	4152006,
							10684424,	41505761,	38689825,	30137533,	32514933,	7787978,	7144130,	4033146,
							10706417,	41646482,	38867416,	30280724,	32751808,	7855760,	7210416,	4077470,
							10726862,	41777162,	39032165,	30413422,	32971096,	7918442,	7271648,	4118369,
							10640242,	41254137,	38408066,	29936776,	32222970,	7715011,	7082328,	3997738,
							10660879,	41385796,	38573796,	30070106,	32443109,	7777903,	7143753,	4038772,
							10682501,	41523976,	38748016,	30210482,	32675227,	7844310,	7208697,	4082211,
							10594594,	40994152,	38116765,	29728959,	31920139,	7639115,	7017799,	3960581,
							10615095,	41124719,	38280875,	29860824,	32137651,	7701213,	7078422,	4001071,
							10635873,	41257272,	38447788,	29995200,	32359761,	7764762,	7140606,	4042709,
							10547429,	40725569,	37815710,	29513976,	31606384,	7560312,	6950612,	3921759,
							10567964,	40856133,	37979586,	29645496,	31823107,	7622130,	7010913,	3962003,
							10588108,	40984235,	38140407,	29774597,	32035912,	7682856,	7070185,	4001592,
							10498550,	40447054,	37503071,	29290189,	31278627,	7477585,	6879602,	3880349,
							10518801,	40575529,	37664027,	29419165,	31490896,	7538078,	6938579,	3919703,
							10539085,	40704360,	37825608,	29548793,	31704498,	7599029,	6998082,	3959466,
							10448344,	40161328,	37182623,	29060939,	30942959,	7392864,	6806873,	3837930,
							10468534,	40289200,	37342602,	29188998,	31153568,	7452861,	6865364,	3876973,
							10489878,	40424668,	37512437,	29325225,	31378059,	7516937,	6927946,	3918820,
							10396457,	39866070,	36851308,	28823624,	30594790,	7304736,	6730920,	3793401,
							10416469,	39992540,	37009226,	28949818,	30802020,	7363693,	6788333,	3831688,
							10437433,	40125248,	37175213,	29082683,	31020571,	7425975,	6849083,	3872265,
							10458071,	40256122,	37339236,	29214275,	31237587,	7487998,	6909775,	3912949,
							10363883,	39693949,	36674808,	28710685,	30451725,	7275157,	6712144,	3787095,
							10383858,	39820066,	36832199,	28836434,	30658259,	7333946,	6769442,	3825351,
							10404223,	39948880,	36993259,	28965371,	30870471,	7394483,	6828574,	3864919,
							10308397,	39378058,	36319685,	28455472,	30075438,	7179260,	6628750,	3737631,
							10328761,	39506553,	36479980,	28583517,	30285748,	7239138,	6687133,	3776636,
							10348948,	39633972,	36639021,	28710667,	30494823,	7298749,	6745359,	3815617,
							10251826,	39056881,	35959525,	28197232,	29695498,	7082627,	6544883,	3687990,
							10271413,	39179961,	36112490,	28319011,	29894914,	7139253,	6599969,	3724720,
							10292945,	39315857,	36282164,	28454751,	30118341,	7203044,	6662386,	3766594,
							10312961,	39442028,	36439485,	28580431,	30324897,	7261922,	6719891,	3805098,
							10213750,	38853034,	35746246,	28056579,	29508937,	7041094,	6514768,	3674278,
							10234494,	38983392,	35908356,	28185790,	29720899,	7101423,	6573627,	3713660,
							10255231,	39113854,	36070760,	28315349,	29933584,	7161992,	6632746,	3753228,
							10154848,	38519580,	35373043,	27789259,	29115676,	6940988,	6427727,	3622607,
							10174651,	38643708,	35527058,	27911773,	29316293,	6998000,	6483278,	3659738,
							10195749,	38776329,	35692082,	28043428,	29532526,	7059639,	6543527,	3700139,
							10215272,	38898824,	35844208,	28164540,	29730996,	7116075,	6598541,	3736919,
							10113431,	38297015,	35138659,	27633113,	28905392,	6893082,	6391700,	3605114,
							10133886,	38425103,	35297463,	27759368,	29112069,	6951809,	6448925,	3643373,
							10153670,	38549075,	35451304,	27881806,	29312743,	7008910,	6504652,	3680694,
							10050217,	37939299,	34737958,	27345465,	28480692,	6784416,	6296565,	3548143,
							10070626,	38066805,	34895732,	27470698,	28685429,	6842533,	6353158,	3585963,
							10090216,	38189236,	35047299,	27591077,	28882376,	6898489,	6407700,	3622456,
							10110265,	38314822,	35203170,	27715223,	29086121,	6956576,	6464537,	3660644,
							10005767,	37700213,	34485387,	27176219,	28250609,	6731230,	6255645,	3527512,
							10025358,	37822376,	34636350,	27295953,	28446314,	6786803,	6309809,	3563763,
							10045940,	37950972,	34795560,	27422453,	28653428,	6845709,	6367304,	3602294,
							9938661,	37321142,	34061017,	26871402,	27799742,	6615510,	6153884,	3466208,
							9959419,	37450472,	34220747,	26998054,	28006756,	6674310,	6211222,	3504612,
							9978833,	37571304,	34369835,	27116157,	28199615,	6729039,	6264542,	3540294,
							9999241,	37698586,	34527206,	27241077,	28404028,	6787167,	6321289,	3578345,
							9890653,	37062594,	33786948,	26686630,	27546159,	6556053,	6107149,	3441840,
							9910817,	37187845,	33941230,	26808674,	27745224,	6612492,	6162098,	3478595,
							9930114,	37307734,	34088944,	26925566,	27935974,	6666604,	6214817,	3513886,
							9949754,	37429972,	34239852,	27045244,	28131736,	6722281,	6269212,	3550408,
							9839965,	36788464,	33494582,	26487834,	27270109,	6490273,	6054256,	3413330,
							9859990,	36912613,	33647269,	26608475,	27466724,	6545990,	6108495,	3449617,
							9879853,	37036044,	33799479,	26729110,	27664024,	6602127,	6163390,	3486530,
							9768345,	36386441,	33046747,	26167345,	26797227,	6369059,	5947680,	3349066,
							9788347,	36510122,	33198515,	26287031,	26991976,	6424177,	6001282,	3384902,
							9807885,	36631098,	33347203,	26404512,	27183566,	6478542,	6054308,	3420471,
							9826960,	36749143,	33492202,	26518999,	27370126,	6531433,	6105848,	3455008,
							9714697,	36097147,	32738691,	25957907,	26505957,	6299408,	5891335,	3318402,
							9733770,	36214773,	32882728,	26071323,	26690332,	6351573,	5942078,	3352357,
							9753028,	36333721,	33028622,	26186398,	26877733,	6404691,	5993847,	3387064,
							9773209,	36458590,	33182035,	26307600,	27075423,	6460808,	6048613,	3423828,
							9658122,	35791209,	32411530,	25734167,	26192335,	6223628,	5829176,	3283934,
							9678052,	35914001,	32561799,	25852454,	26384622,	6278043,	5882135,	3319396,
							9696903,	36030080,	32703793,	25964193,	26566234,	6329436,	5932159,	3352904,
							9716247,	36149466,	32850187,	26079692,	26754472,	6382858,	5984310,	3387942,
							9600354,	35479355,	32078381,	25506391,	25872860,	6146306,	5765568,	3248498,
							9619119,	35594789,	32219503,	25617422,	26053360,	6197416,	5815366,	3281902,
							9639055,	35717517,	32369655,	25735653,	26245726,	6251933,	5868532,	3317596,
							9658051,	35834434,	32512682,	25848271,	26428967,	6303870,	5919191,	3351617,
							9540135,	35154469,	31731288,	25268900,	25539274,	6065394,	5698811,	3211169,
							9558887,	35269356,	31871232,	25378651,	25717184,	6115644,	5747665,	3243879,
							9578720,	35391154,	32019943,	25495550,	25907121,	6169412,	5800054,	3279026,
							9597736,	35507971,	32162655,	25607829,	26089763,	6221194,	5850603,	3313020,
							9477564,	34816555,	31369439,	25020360,	25188167,	5979537,	5627170,	3170473,
							9496233,	34930684,	31508224,	25129072,	25364274,	6029271,	5675541,	3202889,
							9516278,	35053608,	31658187,	25246926,	25555823,	6083545,	5728500,	3238492,
							9534940,	35167883,	31797401,	25356180,	25733154,	6133725,	5777406,	3271337,
							9412829,	34467241,	30995407,	24763267,	24824420,	5890378,	5552525,	3127884,
							9431573,	34581592,	31134240,	24871894,	25000269,	5940024,	5600814,	3160258,
							9451188,	34701476,	31280062,	24986195,	25185618,	5992438,	5651875,	3194542,
							9469900,	34815837,	31419170,	25095249,	25362510,	6042482,	5700654,	3227316,
							9346146,	34108046,	30611229,	24499340,	24450985,	5798786,	5475751,	3084002,
							9365658,	34226883,	30755328,	24611981,	24633205,	5850208,	5525756,	3117525,
							9383908,	34337906,	30889795,	24716977,	24802887,	5898048,	5572240,	3148668,
							9403857,	34459796,	31038113,	24833357,	24991937,	5951637,	5624608,	3183962,
							9277564,	33739176,	30216947,	24228376,	24067026,	5704346,	5396232,	3038246,
							9295993,	33850964,	30352024,	24333648,	24236899,	5752188,	5442684,	3069354,
							9315350,	33968636,	30494518,	24444942,	24416883,	5802987,	5492114,	3102528,
							9333896,	34081410,	30631133,	24551705,	24589673,	5851804,	5539676,	3134498,
							9353651,	34201894,	30777548,	24666497,	24776080,	5904652,	5591352,	3169365,
							9225310,	33471208,	29946270,	24054730,	23841315,	5654740,	5360456,	3021906,
							9244580,	33588053,	30087474,	24164843,	24019196,	5704916,	5409276,	3054686,
							9263125,	33700543,	30223497,	24271011,	24190909,	5753425,	5456562,	3086506,
							9281509,	33812095,	30358417,	24376330,	24361241,	5801534,	5503436,	3118026,
							9151821,	33076433,	29524079,	23763895,	23427396,	5552260,	5273379,	2971189,
							9170311,	33188183,	29658767,	23868720,	23596510,	5599932,	5319762,	3002354,
							9189541,	33304597,	29799308,	23978273,	23773525,	5649905,	5368456,	3035117,
							9207864,	33415480,	29933139,	24082581,	23942054,	5697483,	5414819,	3066318,
							9227593,	33535305,	30078308,	24196171,	24126337,	5749733,	5465966,	3100899,
							9094474,	32781229,	29223687,	23568879,	23169282,	5493959,	5229485,	2949601,
							9113568,	32896446,	29362393,	23676741,	23343200,	5542969,	5277164,	2981636,
							9131782,	33006334,	29494681,	23779631,	23509168,	5589769,	5322733,	3012288,
							9151056,	33122930,	29635427,	23889398,	23686719,	5639974,	5371758,	3045363,
							9016955,	32366558,	28781462,	23264675,	22736328,	5386605,	5137980,	2896040,
							9035252,	32476584,	28913549,	23367177,	22901384,	5433091,	5183214,	2926465,
							9054316,	32591417,	29051636,	23474502,	23074455,	5481898,	5230762,	2958480,
							9072197,	32698979,	29180818,	23574786,	23235991,	5527405,	5275053,	2988275,
							9091718,	32816945,	29323163,	23685835,	23415792,	5578330,	5324893,	3021996,
							8955024,	32047697,	28456039,	23052074,	22451934,	5321285,	5087499,	2870127,
							8972956,	32155188,	28584735,	23151717,	22612081,	5366319,	5131266,	2899539,
							8991987,	32269583,	28722104,	23258407,	22784115,	5414863,	5178617,	2931482,
							9010315,	32379820,	28854576,	23361386,	22950350,	5461831,	5224503,	2962492,
							8871507,	31601621,	27980170,	22724005,	21983073,	5204303,	4986944,	2810626,
							8890504,	31715360,	28116267,	22829375,	22152510,	5251998,	5033369,	2841886,
							8908176,	31820968,	28242400,	22926847,	22308952,	5295951,	5076068,	2870583,
							8926987,	31933732,	28377493,	23031566,	22477536,	5343458,	5122356,	2901778,
							8945228,	32043170,	28508757,	23133472,	22641912,	5389889,	5167725,	2932460,
							8804909,	31259204,	27630331,	22494555,	21673847,	5132414,	4930326,	2780682,
							8822824,	31366052,	27757772,	22592973,	21831805,	5176824,	4973530,	2809780,
							8841620,	31478381,	27892029,	22696869,	21998904,	5223900,	5019422,	2840749,
							8859454,	31584901,	28019281,	22795302,	22157156,	5268470,	5062859,	2870059,
							8878432,	31698586,	28155505,	22901008,	22327664,	5316656,	5109988,	2901972,
							8734766,	30897778,	27259643,	22250013,	21341565,	5054289,	4867837,	2746906,
							8753172,	31007285,	27389995,	22350516,	21502671,	5099542,	4911835,	2776530,
							8771140,	31114311,	27517587,	22449075,	21661007,	5144132,	4955314,	2805901,
							8789863,	31226029,	27650985,	22552266,	21826999,	5190927,	5000984,	2836769,
							8807619,	31331927,	27777402,	22650057,	21984347,	5235314,	5044351,	2866129,
							8662746,	30527675,	26880800,	22000404,	21002595,	4974586,	4804039,	2712377,
							8681002,	30635980,	27009436,	22099424,	21161157,	5019102,	4847324,	2741538,
							8698516,	30739875,	27132828,	22194409,	21313260,	5061804,	4888836,	2769492,
							8717158,	30850816,	27265051,	22296574,	21477532,	5108130,	4934098,	2800144,
							8734934,	30956575,	27391070,	22393932,	21634061,	5152272,	4977227,	2829355,
							8587125,	30138361,	26480816,	21735298,	20639422,	4888124,	4733606,	2673282,
							8605783,	30248930,	26612103,	21836411,	20801548,	4933737,	4778083,	2703355,
							8623266,	30352387,	26734771,	21930752,	20952601,	4976174,	4819406,	2731257,
							8641510,	30460543,	26863241,	22029728,	21111345,	5020845,	4862973,	2760718,
							8659433,	30566959,	26989880,	22127514,	21268592,	5065228,	4906405,	2790198,
							8508921,	29736471,	26068271,	21461852,	20264448,	4798674,	4660513,	2632536,
							8527136,	29843959,	26195430,	21559469,	20420522,	4842474,	4703131,	2661298,
							8544612,	29947084,	26317453,	21653188,	20570484,	4884606,	4744185,	2689055,
							8563173,	30056987,	26447941,	21753759,	20731987,	4930150,	4788738,	2719303,
							8580679,	30160505,	26570697,	21848255,	20883549,	4972837,	4830439,	2747575,
							8428730,	29325756,	25647792,	21183710,	19883579,	4707898,	4586367,	2591204,
							8445873,	29426406,	25766336,	21274365,	20028044,	4748326,	4625609,	2617632,
							8463884,	29532429,	25891536,	21370373,	20181487,	4791402,	4667565,	2645999,
							8481435,	29635846,	26013824,	21464305,	20331915,	4833731,	4708906,	2674035,
							8499560,	29742767,	26140377,	21561590,	20487804,	4877614,	4751771,	2703101,
							8344509,	28893968,	25204571,	20889209,	19477619,	4610236,	4505572,	2545368,
							8362314,	28998296,	25327278,	20982977,	19627032,	4652074,	4546237,	2572816,
							8379450,	29098722,	25445444,	21073334,	19771136,	4692471,	4585555,	2599398,
							8397868,	29207081,	25573454,	21171626,	19928578,	4736806,	4628906,	2628844,
							8414864,	29306810,	25690955,	21261601,	20072289,	4777156,	4668245,	2655488,
							8433120,	29414360,	25818183,	21359430,	20229212,	4821410,	4711586,	2684979,
							8275592,	28554556,	24872225,	20680596,	19209747,	4551463,	4462711,	2525198,
							8292665,	28654278,	24989252,	20769902,	19351975,	4591301,	4501473,	2551408,
							8310550,	28759008,	25112464,	20864172,	19502519,	4633590,	4542752,	2579420,
							8328002,	28861295,	25232957,	20956508,	19650253,	4675181,	4583447,	2607108,
							8346008,	28966941,	25357499,	21051989,	19803026,	4718172,	4625471,	2635652,
							8185552,	28094498,	24400526,	20366792,	18775553,	4446318,	4374855,	2474650,
							8202528,	28193308,	24516163,	20454865,	18915654,	4485545,	4413042,	2500508,
							8220379,	28297476,	24638375,	20548167,	19064408,	4527284,	4453753,	2528124,
							8238176,	28401397,	24760378,	20641372,	19213105,	4569031,	4494491,	2555765,
							8255535,	28502892,	24879750,	20732784,	19359389,	4610259,	4534917,	2583357,
							8272660,	28603005,	24997455,	20822869,	19503424,	4650805,	4574609,	2610392,
							8110041,	27722090,	24033967,	20134434,	18472426,	4378163,	4323212,	2448732,
							8127111,	27821247,	24149872,	20222674,	18612839,	4417519,	4361588,	2474776,
							8144686,	27923450,	24269454,	20313787,	18757919,	4458202,	4401274,	2501719,
							8161589,	28021760,	24384521,	20401508,	18897699,	4497437,	4439591,	2527768,
							8179707,	28127523,	24508786,	20496619,	19049885,	4540336,	4481668,	2556497,
							8013698,	27231891,	23532402,	19800745,	18009699,	4265607,	4228516,	2393727,
							8031215,	27333292,	23650581,	19890492,	18152209,	4305482,	4267346,	2420056,
							8048771,	27435015,	23769264,	19980725,	18295671,	4345675,	4306536,	2446660,
							8065540,	27532145,	23882566,	20066867,	18432651,	4384065,	4343991,	2472108,
							8083055,	27633812,	24001409,	20157408,	18576924,	4424585,	4383611,	2499092,
							8100167,	27733260,	24117835,	20246279,	18718864,	4464558,	4422817,	2525886,
							7931835,	26828701,	23134751,	19547179,	17675289,	4189084,	4168904,	2362439,
							7948648,	26925667,	23247464,	19632638,	17810918,	4227052,	4205934,	2387613,
							7966273,	27027583,	23366234,	19722919,	17954561,	4267365,	4245353,	2414481,
							7983590,	27127659,	23482792,	19811456,	18095314,	4306830,	4283900,	2440721,
							8000636,	27226336,	23597958,	19899157,	18235152,	4346172,	4322473,	2467088,
							8017225,	27322267,	23709785,	19984199,	18370543,	4384199,	4359693,	2492488,
							7846728,	26410084,	22721877,	19283534,	17326574,	4108918,	4106035,	2329130,
							7863277,	26505140,	22832009,	19366825,	17458517,	4145810,	4141997,	2353579,
							7880660,	26605258,	22948309,	19455003,	17598543,	4185054,	4180337,	2379701,
							7897144,	26700118,	23058434,	19538468,	17731074,	4222209,	4216662,	2404483,
							7914832,	26802294,	23177508,	19629066,	17875486,	4262845,	4256530,	2431764,
							7931525,	26898600,	23289606,	19714260,	18011140,	4300979,	4293912,	2457327,
							7757721,	25972223,	22289146,	19006048,	16957034,	4023087,	4037700,	2292098,
							7774315,	26067280,	22399082,	19089117,	17088621,	4059910,	4073655,	2316606,
							7791402,	26165273,	22512522,	19174895,	17224567,	4097964,	4110812,	2341928,
							7807787,	26259219,	22621264,	19257123,	17354906,	4134454,	4146450,	2366218,
							7825226,	26359553,	22737828,	19345611,	17495759,	4174070,	4185336,	2392868,
							7648162,	25420596,	21728113,	18633369,	16438669,	3896007,	3929382,	2227983,
							7665019,	25516683,	21838739,	18716611,	16570017,	3932627,	3965011,	2252182,
							7682311,	25615536,	21952918,	18802834,	16706615,	3970881,	4002413,	2277726,
							7698624,	25708664,	22060344,	18883857,	16834817,	4006741,	4037436,	2301621,
							7715578,	25805624,	22172377,	18968487,	16968927,	4044307,	4074174,	2326717,
							7732225,	25900964,	22282744,	19052052,	17101710,	4081618,	4110791,	2351824,
							7749280,	25998715,	22395959,	19137794,	17237956,	4119895,	4148343,	2377565,
							7568965,	25045872,	21373850,	18417900,	16170146,	3838933,	3889426,	2210439,
							7585604,	25140392,	21482392,	18499426,	16298645,	3874742,	3924268,	2234115,
							7602602,	25237211,	21593914,	18583475,	16431630,	3911962,	3960664,	2258991,
							7619042,	25330897,	21701907,	18664958,	16560755,	3948174,	3996162,	2283326,
							7635916,	25427130,	21812898,	18748727,	16693497,	3985388,	4032617,	2308291,
							7652233,	25520222,	21920332,	18829881,	16822239,	4021528,	4068073,	2332613,
							7469148,	24557353,	20891355,	18107179,	15752268,	3740267,	3808892,	2165172,
							7486080,	24653367,	21001548,	18189997,	15883056,	3776835,	3844647,	2189630,
							7502723,	24747686,	21109724,	18271240,	16011244,	3812640,	3879612,	2213515,
							7519081,	24840529,	21216419,	18351567,	16138359,	3848266,	3914537,	2237474,
							7535806,	24935522,	21325628,	18433794,	16268460,	3884713,	3950244,	2261951,
							7551953,	25027254,	21431140,	18513299,	16394371,	3920027,	3984888,	2285732,
							7365665,	24052304,	20393276,	17786486,	15320504,	3638073,	3725153,	2117844,
							7382340,	24146383,	20500792,	17867012,	15447311,	3673447,	3759681,	2141433,
							7399120,	24241206,	20609355,	17948485,	15575901,	3709412,	3794887,	2165567,
							7415083,	24331311,	20712406,	18025751,	15697751,	3743467,	3828197,	2188380,
							7431855,	24426237,	20821265,	18107584,	15827129,	3779711,	3863730,	2212768,
							7447684,	24515690,	20923700,	18184490,	15948581,	3813704,	3897036,	2235622,
							7464804,	24612915,	21035613,	18268971,	16082766,	3851490,	3934294,	2261359,
							7275474,	23626273,	19988593,	17537249,	15002726,	3567908,	3672788,	2091977,
							7291143,	23714169,	20088571,	17611851,	15119879,	3600529,	3704596,	2113707,
							7307812,	23808016,	20195730,	17692138,	15246510,	3635954,	3739313,	2137553,
							7323770,	23897850,	20298318,	17769025,	15367849,	3669930,	3772652,	2160492,
							7340475,	23992094,	20406158,	17849997,	15495835,	3705810,	3807886,	2184737,
							7356410,	24081923,	20508892,	17927120,	15617762,	3740013,	3841512,	2207918,
							7163961,	23084544,	19455234,	17193374,	14537625,	3456924,	3580725,	2039038,
							7180170,	23175161,	19558039,	17269947,	14657746,	3490361,	3613344,	2061350,
							7196816,	23268484,	19664258,	17349345,	14782786,	3525314,	3647593,	2084883,
							7212241,	23354707,	19762087,	17422229,	14897167,	3557170,	3678689,	2106164,
							7228911,	23448388,	19868980,	17502349,	15023726,	3592669,	3713610,	2130271,
							7244860,	23537935,	19971091,	17578849,	15144524,	3626541,	3746918,	2153250,
							7261303,	23630383,	20076622,	17657979,	15269559,	3661620,	3781430,	2177072,
							7065364,	22619607,	19012530,	16918764,	14182922,	3376960,	3519075,	2006944,
							7081449,	22709178,	19113859,	16994097,	14300990,	3409825,	3551165,	2028932,
							7096955,	22795525,	19211566,	17066774,	14414983,	3441589,	3582216,	2050237,
							7113379,	22887289,	19315774,	17144579,	14537509,	3475877,	3615893,	2073463,
							7129734,	22978741,	19419699,	17222221,	14659841,	3510124,	3649538,	2096669,
							7145346,	23065976,	19518787,	17296238,	14776487,	3542800,	3681674,	2118869,
							7162045,	23159665,	19625656,	17376415,	14903405,	3578516,	3716961,	2143358,
							6962006,	22132294,	18547520,	16628933,	13805553,	3290846,	3451477,	1970784,
							6978094,	22221564,	18648268,	16703735,	13922751,	3323490,	3483399,	1992709,
							6993705,	22308229,	18746162,	16776514,	14036988,	3355383,	3514677,	2014265,
							7009704,	22397123,	18846625,	16851214,	14154206,	3388085,	3546709,	2036302,
							7025885,	22487205,	18948651,	16927256,	14273844,	3421559,	3579601,	2059013,
							7041646,	22575026,	19048256,	17001646,	14391209,	3454516,	3612137,	2081603,
							7057969,	22666125,	19151718,	17078990,	14513295,	3488797,	3645955,	2105055,
							6854962,	21629243,	18068300,	16330256,	13415969,	3201591,	3380934,	1932630,
							6870393,	21714434,	18164090,	16401214,	13527048,	3232548,	3411268,	1953540,
							6886447,	21803248,	18264147,	16475458,	13643437,	3265021,	3443111,	1975494,
							6901562,	21886702,	18357992,	16544977,	13752252,	3295341,	3472815,	1995965,
							6917861,	21977148,	18460234,	16621132,	13872144,	3328949,	3505942,	2018937,
							6933949,	22066433,	18561173,	16696324,	13990541,	3362150,	3538692,	2041675,
							6949429,	22152312,	18658242,	16768629,	14104391,	3394074,	3570174,	2063518,
							6742843,	21102925,	17566446,	16016490,	13004408,	3106494,	3304847,	1890755,
							6758703,	21190162,	17664256,	16088792,	13117426,	3137965,	3335676,	1912012,
							6774408,	21276536,	17761098,	16160376,	13229317,	3169119,	3366191,	1933046,
							6789718,	21360828,	17855731,	16230448,	13339082,	3199760,	3396290,	1953860,
							6805651,	21448738,	17954636,	16303833,	13454257,	3231970,	3427991,	1975828,
							6820974,	21533256,	18049725,	16374418,	13565141,	3263028,	3458624,	1997115,
							6837099,	21622483,	18150434,	16449404,	13683287,	3296212,	3491436,	2019968,
							6626572,	20558939,	17048559,	15692601,	12578543,	3007607,	3225080,	1846295,
							6642458,	20645959,	17145852,	15764410,	12690756,	3038882,	3255782,	1867535,
							6658007,	20731063,	17240909,	15834485,	12800108,	3069310,	3285600,	1888121,
							6673011,	20813178,	17332654,	15902157,	12905800,	3098753,	3314489,	1908095,
							6688882,	20900343,	17430392,	15974525,	13019285,	3130506,	3345795,	1929856,
							6704696,	20987262,	17527928,	16046790,	13132671,	3162243,	3377091,	1951610,
							6719971,	21071242,	17622226,	16116731,	13242575,	3193067,	3407566,	1972859,
							6735933,	21159182,	17721173,	16190267,	13358363,	3225607,	3439802,	1995382,
							6522054,	20084479,	16612168,	15430623,	12251106,	2936429,	3172678,	1820848,
							6536701,	20164048,	16700494,	15495410,	12351814,	2964374,	3200016,	1839711,
							6552451,	20250029,	16796424,	15566149,	12462374,	2995223,	3230359,	1860755,
							6567936,	20334532,	16890667,	15635612,	12570895,	3025494,	3260134,	1881417,
							6582819,	20415725,	16981215,	15702364,	12675221,	3054613,	3288797,	1901327,
							6598785,	20503232,	17079278,	15775030,	12789412,	3086669,	3320543,	1923514,
							6613756,	20585109,	17170841,	15842743,	12895630,	3116444,	3350002,	1944101,
							6395896,	19497118,	16053538,	15080169,	11786825,	2827251,	3082939,	1769469,
							6411483,	19581670,	16147387,	15149094,	11894237,	2857170,	3112356,	1789894,
							6426941,	19665546,	16240505,	15217489,	12000818,	2886851,	3141524,	1810130,
							6442224,	19748465,	16332556,	15285098,	12106178,	2916196,	3170372,	1830159,
							6457183,	19829725,	16422920,	15351617,	12210135,	2945249,	3199046,	1850153,
							6472544,	19913248,	16515857,	15420049,	12317065,	2975116,	3228495,	1870659,
							6487551,	19994968,	16606974,	15487317,	12422523,	3004694,	3257806,	1891197,
							6503345,	20081218,	16703407,	15558703,	12534735,	3036243,	3289138,	1913187,
							6281234,	18978019,	15574996,	14790567,	11419331,	2745356,	3020210,	1736928,
							6296691,	19061473,	15667312,	14858219,	11524656,	2774697,	3049092,	1757023,
							6311762,	19142743,	15757077,	14923883,	11626660,	2803039,	3076903,	1776304,
							6326347,	19221412,	15844033,	14987567,	11725757,	2830636,	3104066,	1795211,
							6341775,	19304922,	15936676,	15055675,	11832170,	2860400,	3133497,	1815796,
							6357238,	19388749,	16029811,	15124251,	11939476,	2890459,	3163264,	1836645,
							6371813,	19467565,	16117172,	15188427,	12039678,	2918468,	3190948,	1856004,
							6387496,	19552816,	16212185,	15258629,	12149955,	2949491,	3221815,	1877736,
							6161825,	18438915,	15078260,	14489370,	11035282,	2659046,	2953194,	1701391,
							6176174,	18515724,	15162608,	14550802,	11130434,	2685444,	2979100,	1719382,
							6191536,	18598356,	15253809,	14617583,	11234466,	2714484,	3007783,	1739441,
							6206536,	18678942,	15342628,	14682514,	11335422,	2742604,	3035492,	1758769,
							6221857,	18761505,	15433937,	14749516,	11440031,	2771874,	3064479,	1779094,
							6236428,	18839889,	15520492,	14812952,	11538984,	2799547,	3091880,	1798317,
							6251681,	18922189,	15611623,	14879904,	11643628,	2828853,	3120918,	1818682,
							6266087,	18999734,	15697299,	14942718,	11741621,	2856251,	3148029,	1837675,
							6037144,	17877447,	14561059,	14175074,	10632524,	2567764,	2881387,	1662549,
							6051244,	17952459,	14643031,	14234561,	10724442,	2593236,	2906386,	1679935,
							6066174,	18032204,	14730533,	14298321,	10823365,	2620758,	2933501,	1698862,
							6081419,	18113854,	14820399,	14364032,	10925723,	2649364,	2961823,	1718736,
							6095718,	18190254,	14904293,	14425243,	11020878,	2675913,	2988082,	1737159,
							6110819,	18271230,	14993522,	14490564,	11122743,	2704414,	3016335,	1757015,
							6125944,	18352387,	15083027,	14556159,	11225169,	2733116,	3044837,	1777081,
							6140442,	18430148,	15168771,	14618996,	11323305,	2760626,	3072173,	1796346,
							5906749,	17291620,	14021335,	13846151,	10208498,	2470720,	2803915,	1619717,
							5921020,	17367263,	14103832,	13905996,	10301081,	2496446,	2829268,	1637447,
							5935692,	17445120,	14188819,	13967682,	10396526,	2522959,	2855379,	1655684,
							5950673,	17524885,	14276209,	14031372,	10495530,	2550608,	2882774,	1674955,
							5965704,	17604984,	14364058,	14095471,	10595298,	2578505,	2910446,	1694439,
							5979749,	17679594,	14445613,	14154769,	10687247,	2604112,	2935739,	1712164,
							5994697,	17759356,	14533207,	14218766,	10786976,	2632030,	2963459,	1731697,
							6009036,	17835800,	14617114,	14280066,	10882554,	2658817,	2990111,	1750531,
							6024060,	17916150,	14705576,	14344876,	10983856,	2687270,	3018469,	1770600,
							5785822,	16762387,	13547778,	13567200,	9863546,	2395909,	2748477,	1592329,
							5800525,	16840071,	13632340,	13628502,	9958432,	2422320,	2774582,	1610664,
							5815073,	16916902,	13715940,	13689078,	10052140,	2448384,	2800322,	1628723,
							5829286,	16992038,	13797820,	13748534,	10144374,	2474128,	2825852,	1646723,
							5844058,	17070312,	13883297,	13810714,	10240967,	2501114,	2852626,	1665594,
							5858625,	17147459,	13967498,	13871927,	10335998,	2527647,	2878935,	1684133,
							5872988,	17223674,	14050898,	13932763,	10430842,	2554263,	2905486,	1702972,
							5887674,	17301645,	14136222,	13994973,	10527726,	2581405,	2932498,	1722078,
							5645054,	16135243,	12972415,	13216559,	9409528,	2291033,	2663484,	1544272,
							5659569,	16211394,	13054858,	13276085,	9501419,	2316574,	2688727,	1562020,
							5674044,	16287404,	13137211,	13335582,	9593295,	2342111,	2713949,	1579730,
							5687858,	16359844,	13215609,	13392174,	9680639,	2366381,	2737924,	1596573,
							5702482,	16436839,	13299285,	13452845,	9774732,	2392668,	2764047,	1615051,
							5717058,	16513644,	13382822,	13513458,	9868786,	2418952,	2790168,	1633525,
							5730849,	16586146,	13461506,	13570433,	9957027,	2443570,	2814599,	1650783,
							5745709,	16664712,	13547287,	13632946,	10054505,	2470959,	2841982,	1670270,
							5760269,	16741610,	13631141,	13693961,	10149479,	2497593,	2868555,	1689146,
							5512814,	15559777,	12457597,	12911516,	9027307,	2206227,	2598267,	1510006,
							5527150,	15634540,	12538178,	12969525,	9116708,	2231067,	2622833,	1527307,
							5541514,	15709555,	12619151,	13027903,	9206815,	2256141,	2647672,	1544835,
							5555872,	15784610,	12700248,	13086433,	9297263,	2281341,	2672670,	1562501,
							5569635,	15856471,	12777830,	13142407,	9383773,	2305463,	2696631,	1579466,
							5584068,	15932083,	12859729,	13201673,	9475622,	2331132,	2722175,	1597575,
							5598354,	16006914,	12940758,	13260290,	9566421,	2356494,	2747394,	1615438,
							5612465,	16081003,	13021244,	13318759,	9657482,	2382101,	2773074,	1633815,
							5626879,	16156696,	13103442,	13378411,	9750219,	2408110,	2799058,	1652317,
							5375284,	14963980,	11925749,	12596316,	8631251,	2117837,	2529624,	1473366,
							5389298,	15036554,	12003533,	12652071,	8716915,	2141593,	2553102,	1489914,
							5403465,	15110071,	12082513,	12708828,	8804360,	2165916,	2577218,	1506970,
							5417240,	15181571,	12159387,	12764150,	8889773,	2189739,	2600921,	1523800,
							5431322,	15254730,	12238078,	12820776,	8977150,	2214085,	2625109,	1540948,
							5445670,	15329507,	12318794,	12879087,	9067525,	2239391,	2650389,	1558977,
							5460004,	15404223,	12399468,	12937394,	9157942,	2264724,	2675711,	1577045,
							5473718,	15475652,	12476549,	12993081,	9244272,	2288908,	2699886,	1594301,
							5487888,	15549570,	12556415,	13050835,	9333863,	2314014,	2724983,	1612211,
							5231428,	14342842,	11371554,	12267043,	8215038,	2024000,	2455592,	1432889,
							5245288,	14414139,	11447597,	12321368,	8298351,	2047093,	2478435,	1449022,
							5259287,	14486310,	11524753,	12376631,	8383337,	2070721,	2501884,	1465643,
							5273552,	14560073,	11603876,	12433521,	8471218,	2095280,	2526400,	1483135,
							5287491,	14632030,	11680919,	12488797,	8556390,	2119014,	2550017,	1499929,
							5300906,	14701242,	11755000,	12541945,	8638298,	2141844,	2572740,	1516087,
							5315084,	14774679,	11833926,	12598818,	8726367,	2166523,	2597453,	1533784,
							5329227,	14848002,	11912805,	12655703,	8814510,	2191232,	2622198,	1551499,
							5342666,	14917522,	11987434,	12709419,	8897598,	2214489,	2645458,	1568132,
							5081853,	13700355,	10799866,	11927433,	7784635,	1926391,	2377801,	1389660,
							5095658,	13770964,	10874885,	11980919,	7866653,	1949168,	2400426,	1405744,
							5109478,	13841721,	10950134,	12034622,	7949071,	1972070,	2423176,	1421912,
							5123513,	13913736,	11026925,	12089593,	8033730,	1995686,	2446735,	1438727,
							5136620,	13980748,	11098109,	12140352,	8111592,	2017320,	2468236,	1454023,
							5150549,	14052311,	11174520,	12195122,	8196053,	2040913,	2491808,	1470881,
							5164482,	14123934,	11251043,	12250022,	8280809,	2064621,	2515531,	1487869,
							5178429,	14195735,	11327869,	12305211,	8366107,	2088501,	2539439,	1504995,
							5191648,	14263620,	11400333,	12357159,	8446258,	2110912,	2561866,	1521071,
							5205863,	14337059,	11479231,	12414107,	8534764,	2135851,	2587021,	1539246,
							4939514,	13102872,	10281075,	11627553,	7416657,	1846262,	2317369,	1358726,
							4953323,	13173126,	10355469,	11680521,	7497910,	1868872,	2339903,	1374822,
							4966987,	13242643,	10429075,	11732914,	7578239,	1891207,	2362138,	1390683,
							4980538,	13311575,	10502057,	11784858,	7657880,	1913353,	2384192,	1406422,
							4993847,	13379372,	10573982,	11836194,	7736876,	1935417,	2406279,	1422277,
							5007446,	13448698,	10647554,	11888695,	7817601,	1957935,	2428780,	1438397,
							5021200,	13518979,	10722329,	11942200,	7900110,	1981020,	2451918,	1455021,
							5035135,	13590330,	10798431,	11996823,	7984667,	2004792,	2475888,	1472366,
							5048385,	13658057,	10870546,	12048494,	8064498,	2027185,	2498407,	1488615,
							5062223,	13728999,	10946300,	12102917,	8148791,	2050882,	2522283,	1505870,
							4791176,	12483248,	9744211,	11317019,	7034169,	1762351,	2253295,	1325264,
							4804661,	12551310,	9815841,	11367780,	7111776,	1783899,	2274747,	1340586,
							4817386,	12615349,	9883034,	11415255,	7184143,	1803933,	2294631,	1354743,
							4831164,	12685195,	9956904,	11467904,	7265177,	1826611,	2317421,	1371200,
							4844612,	12753229,	10028688,	11518922,	7343427,	1848417,	2339220,	1386842,
							4858139,	12821785,	10101167,	11570541,	7422777,	1870581,	2361429,	1402820,
							4871791,	12891089,	10174572,	11622943,	7503566,	1893229,	2384226,	1419308,
							4884815,	12957108,	10244414,	11672743,	7580254,	1914701,	2405811,	1434900,
							4898514,	13026817,	10318437,	11725721,	7662133,	1937707,	2429014,	1451707,
							4912205,	13096510,	10392487,	11778764,	7744215,	1960810,	2452368,	1468676,
							4635798,	11836679,	9184292,	10992166,	6631177,	1672842,	2183584,	1287682,
							4648975,	11902634,	9253250,	11040800,	6705298,	1693394,	2204052,	1302337,
							4662469,	11970405,	9324383,	11091190,	6782483,	1714913,	2225610,	1317863,
							4675086,	12033518,	9390360,	11137734,	6853471,	1734619,	2245272,	1331976,
							4688477,	12100857,	9461131,	11187933,	6930459,	1756111,	2266834,	1347535,
							4701871,	12168241,	9531994,	11238239,	7007697,	1777702,	2288529,	1363213,
							4715277,	12235788,	9603134,	11288810,	7085433,	1799451,	2310394,	1379016,
							4728718,	12303593,	9674646,	11339729,	7163854,	1821443,	2332567,	1395102,
							4741634,	12368650,	9743187,	11388508,	7238991,	1842534,	2353869,	1410597,
							4755244,	12437535,	9816107,	11440648,	7319673,	1865283,	2376949,	1427458,
							4473896,	11166724,	8605647,	10656310,	6212967,	1579233,	2109729,	1247032,
							4487041,	11232099,	8673711,	10704209,	6285951,	1599501,	2129982,	1261607,
							4499447,	11293591,	8737524,	10748974,	6353950,	1618329,	2148745,	1275075,
							4512803,	11360231,	8807171,	10798204,	6429339,	1639384,	2169916,	1290411,
							4525853,	11425248,	8874998,	10846040,	6502406,	1659730,	2190312,	1305142,
							4539044,	11491119,	8943889,	10894762,	6577046,	1680579,	2211275,	1320327,
							4552534,	11558714,	9014867,	10945197,	6654746,	1702429,	2233421,	1336516,
							4565098,	11621364,	9080322,	10991458,	6725604,	1722230,	2253357,	1350991,
							4578354,	11687778,	9150033,	11040958,	6801767,	1743606,	2274965,	1366735,
							4591699,	11754708,	9220377,	11090984,	6878888,	1765300,	2296947,	1382784,
							4605044,	11821733,	9290928,	11141237,	6956479,	1787162,	2319140,	1399033,
							4317663,	10534210,	8071508,	10353791,	5846809,	1500122,	2050241,	1216589,
							4330765,	10598957,	8138656,	10400972,	5918753,	1520161,	2070371,	1231185,
							4343732,	10663039,	8205110,	10447659,	5989930,	1539986,	2090289,	1245632,
							4356137,	10724236,	8268479,	10492121,	6057635,	1558819,	2109185,	1259319,
							4369305,	10789532,	8336453,	10540082,	6131107,	1579388,	2129961,	1274470,
							4382207,	10853420,	8402848,	10586832,	6202547,	1599331,	2150043,	1289071,
							4395302,	10918435,	8470619,	10634713,	6275980,	1619909,	2170844,	1304249,
							4408384,	10983415,	8538395,	10682637,	6349572,	1640567,	2191777,	1319573,
							4420954,	11045813,	8603453,	10728632,	6420201,	1660397,	2211876,	1334294,
							4433968,	11110532,	8671035,	10776470,	6493724,	1681049,	2232810,	1349618,
							4481253,	11362282,	8953680,	10992857,	6856301,	1793243,	2359739,	1455022,
							4154667,	9878123,	7518931,	10040673,	5466361,	1417288,	1987162,	1183658,
							4167614,	9941632,	7584456,	10086575,	5536289,	1436787,	2006810,	1197977,
							4179789,	10001130,	7645609,	10129238,	5600982,	1454730,	2024775,	1210965,
							4192504,	10063483,	7709915,	10174259,	5669507,	1473815,	2043981,	1224942,
							4205489,	10127369,	7776057,	10220773,	5740666,	1493749,	2064169,	1239736,
							4218240,	10190035,	7840842,	10266249,	5810087,	1513147,	2083760,	1254050,
							4231183,	10253840,	7907032,	10312891,	5881596,	1533225,	2104144,	1269026,
							4244135,	10317705,	7973316,	10359634,	5953332,	1553394,	2124656,	1284131,
							4256508,	10378633,	8036474,	10404120,	6021526,	1572543,	2144105,	1298434,
							4269481,	10442754,	8103188,	10451280,	6094063,	1592975,	2164913,	1313764,
							4315827,	10687864,	8377196,	10660628,	6444927,	1701822,	2288675,	1417332,
							3983843,	9193779,	6943119,	9713392,	5065615,	1328828,	1918272,	1146338,
							3996421,	9254873,	7005661,	9756938,	5131648,	1347180,	1936726,	1159775,
							4009264,	9317460,	7069984,	9801934,	5200265,	1366380,	1956189,	1174080,
							4021794,	9378395,	7132453,	9845501,	5266459,	1384820,	1974787,	1187672,
							4034412,	9439879,	7195620,	9889659,	5333716,	1403603,	1993777,	1201583,
							4046562,	9498989,	7256276,	9932032,	5398250,	1421636,	2012026,	1214964,
							4059250,	9560964,	7320124,	9976803,	5466675,	1440819,	2031503,	1229302,
							4071988,	9623271,	7384414,	10021963,	5535828,	1460247,	2051278,	1243895,
							4084725,	9685594,	7448753,	10067191,	5605164,	1479759,	2071176,	1258617,
							4097527,	9748361,	7513685,	10112930,	5675421,	1499563,	2091402,	1273593,
							4142816,	9986242,	7778433,	10314776,	6013772,	1604794,	2211653,	1374999,
							3805922,	8486132,	6350087,	9376609,	4652218,	1237008,	1845988,	1106490,
							3818212,	8545225,	6410111,	9418165,	4715004,	1254429,	1863514,	1119289,
							3830661,	8605241,	6471250,	9460630,	4779386,	1272359,	1881620,	1132556,
							3843098,	8665226,	6532397,	9503141,	4843926,	1290366,	1899850,	1145960,
							3855572,	8725494,	6593946,	9546009,	4909122,	1308586,	1918324,	1159563,
							3867516,	8783089,	6652669,	9586855,	4971180,	1325917,	1935886,	1172488,
							3880110,	8844112,	6715194,	9630576,	5037999,	1344705,	1955079,	1186748,
							3892594,	8904607,	6777168,	9673884,	5104093,	1363242,	1973938,	1200677,
							3905042,	8964926,	6838972,	9717087,	5170065,	1381761,	1992808,	1214642,
							3917723,	9026584,	6902393,	9761620,	5238419,	1401062,	2012600,	1229398,
							3962121,	9257978,	7158535,	9956292,	5564443,	1502594,	2129060,	1328233,
							3975090,	9321547,	7224588,	10003267,	5637711,	1523711,	2151298,	1345401,
							3632547,	7811398,	5796762,	9069483,	4284849,	1157960,	1786375,	1075726,
							3644825,	7870055,	5856131,	9110550,	4347004,	1175281,	1803922,	1088659,
							3657109,	7928772,	5915596,	9151720,	4409390,	1192693,	1821595,	1101717,
							3668834,	7984705,	5972144,	9190805,	4468517,	1209167,	1838285,	1114027,
							3681116,	8043532,	6031857,	9232239,	4531431,	1226756,	1856160,	1127239,
							3693429,	8102561,	6091837,	9273919,	4594851,	1244537,	1874298,	1140715,
							3705762,	8161779,	6152114,	9315875,	4658784,	1262484,	1892622,	1154338,
							3717949,	8220240,	6211549,	9357188,	4721633,	1280094,	1910560,	1167634,
							3730443,	8280431,	6273041,	9400169,	4787442,	1298666,	1929630,	1181888,
							3742821,	8340054,	6333944,	9442727,	4852571,	1317034,	1948479,	1195980,
							3786412,	8565703,	6582715,	9631526,	5169128,	1415997,	2062745,	1293892,
							3799181,	8627773,	6646841,	9676981,	5239963,	1436443,	2084363,	1310690,
							3450898,	7108628,	5221547,	8749489,	3899434,	1073969,	1721702,	1041177,
							3462929,	7165544,	5278732,	8788847,	3958823,	1090500,	1738458,	1053557,
							3475002,	7222706,	5336234,	8828484,	4018761,	1107230,	1755476,	1066188,
							3487097,	7280066,	5394026,	8868385,	4079178,	1124112,	1772659,	1078938,
							3499131,	7337160,	5451580,	8908146,	4139446,	1140980,	1789874,	1091769,
							3511359,	7395329,	5510399,	8948927,	4201505,	1158421,	1807746,	1105131,
							3522857,	7449779,	5565201,	8986737,	4258748,	1174422,	1824051,	1117256,
							3535018,	7507705,	5623857,	9027459,	4320790,	1191877,	1841956,	1130662,
							3547297,	7566310,	5683333,	9068862,	4384080,	1209752,	1860372,	1144517,
							3559381,	7623910,	5741698,	9109413,	4445916,	1227169,	1878262,	1157937,
							3602420,	7845026,	5984281,	9293073,	4753866,	1323679,	1990259,	1254656,
							3614984,	7905543,	6046406,	9336941,	4822131,	1343403,	2011184,	1271015,
							3261242,	6380331,	4627586,	8418976,	3499553,	985995,		1652861,	1003423,
							3273127,	6436017,	4683156,	8457070,	3556969,	1002004,	1669164,	1015563,
							3284959,	6491486,	4738546,	8495055,	3614220,	1017956,	1685384,	1027607,
							3296739,	6546725,	4793720,	8532906,	3671299,	1033876,	1701597,	1039679,
							3308753,	6603257,	4850414,	8571986,	3730558,	1050507,	1718654,	1052476,
							3320686,	6659421,	4906748,	8610813,	3789410,	1067011,	1735557,	1065130,
							3332468,	6714820,	4962252,	8649019,	3847235,	1083202,	1752115,	1077515,
							3344128,	6769797,	5017539,	8687273,	3905534,	1099672,	1769149,	1090429,
							3355983,	6825671,	5073673,	8726031,	3964398,	1116217,	1786140,	1103191,
							3367963,	6882303,	5130747,	8765576,	4024685,	1133232,	1803690,	1116438,
							3410045,	7096677,	5364586,	8942064,	4320447,	1226117,	1912011,	1210739,
							3422401,	7155611,	5424664,	8984300,	4386044,	1245078,	1932187,	1226601,
							3063304,	5626319,	4015139,	8078180,	3085431,	894013,		1579697,	962216,
							3075086,	5681009,	4069375,	8115229,	3141216,	909589,		1595618,	974142,
							3086774,	5735292,	4123228,	8152022,	3196610,	925052,		1611413,	985965,
							3098335,	5788931,	4176379,	8188289,	3251135,	940246,		1626907,	997541,
							3110152,	5843955,	4231142,	8225847,	3307936,	956181,		1643279,	1009868,
							3121272,	5895502,	4282205,	8260698,	3360380,	970820,		1658245,	1021091,
							3132982,	5950085,	4336582,	8298023,	3416863,	986673,		1674538,	1033369,
							3144745,	6004955,	4391299,	8335634,	3473889,	1002719,	1691078,	1045870,
							3156492,	6059835,	4446111,	8373364,	3531165,	1018851,	1707721,	1058464,
							3168281,	6114992,	4501288,	8411412,	3589042,	1035188,	1724618,	1071286,
							3209193,	6321508,	4725137,	8579748,	3870864,	1123851,	1828497,	1162431,
							3221334,	6378811,	4783105,	8620296,	3933680,	1142007,	1847862,	1177733,
							3233484,	6436221,	4841258,	8661034,	3996899,	1160315,	1867434,	1193239,
							2868308,	4899480,	3436937,	7763195,	2711487,	813253,		1517830,	929319,
							2879677,	4951589,	3488095,	7797868,	2763387,	827686,		1532552,	940349,
							2891142,	5004255,	3539929,	7833096,	2816277,	842440,		1547646,	951686,
							2902611,	5056976,	3591856,	7868422,	2869383,	857279,		1562857,	963132,
							2914154,	5110171,	3644403,	7904284,	2923491,	872463,		1578506,	974997,
							2925684,	5163326,	3696935,	7940152,	2977620,	887650,		1594143,	986824,
							2937220,	5216532,	3749550,	7976113,	3031971,	902933,		1609930,	998820,
							2948744,	5269767,	3802272,	8012194,	3086562,	918292,		1625793,	1010862,
							2960184,	5322579,	3854544,	8047944,	3140614,	933492,		1641488,	1022782,
							2971914,	5376966,	3908648,	8085169,	3197292,	949556,		1658222,	1035602,
							3011694,	5576096,	4123365,	8246275,	3467200,	1034786,	1758775,	1124764,
							3023625,	5631838,	4179358,	8285278,	3527536,	1052248,	1777477,	1139648,
							3035565,	5687686,	4235532,	8324467,	3588265,	1069858,	1796380,	1154732,
							3047513,	5743639,	4291886,	8363841,	3649388,	1087618,	1815488,	1170019,
							2676084,	4198768,	2891387,	7472550,	2375048,	742885,		1466379,	904083,
							2686898,	4247748,	2939084,	7504726,	2423146,	756285,		1480116,	914460,
							2698150,	4298914,	2989094,	7538578,	2473906,	770463,		1494676,	925464,
							2709451,	4350360,	3039445,	7572721,	2525217,	784838,		1509493,	936711,
							2720747,	4401852,	3089917,	7606998,	2576806,	799310,		1524432,	948076,
							2732045,	4453397,	3140492,	7641386,	2628644,	813886,		1539528,	959607,
							2743474,	4505667,	3191921,	7676470,	2681728,	828871,		1555106,	971550,
							2754733,	4557092,	3242438,	7710861,	2733632,	843479,		1570245,	983121,
							2766094,	4609115,	3293691,	7745867,	2786651,	858456,		1585825,	995075,
							2805106,	4802588,	3501021,	7900925,	3046324,	940661,		1683353,	1082331,
							2816820,	4856722,	3554977,	7938328,	3104067,	957383,		1701326,	1096730,
							2828543,	4910955,	3609103,	7975905,	3162179,	974247,		1719492,	1111322,
							2840275,	4965299,	3663412,	8013667,	3220681,	991257,		1737859,	1126115,
							2852017,	5019748,	3717898,	8051611,	3279567,	1008414,	1756427,	1141109,
							2474061,	3467228,	2322655,	7168298,	2019078,	666974,		1409015,	874225,
							2485218,	3517429,	2371378,	7201162,	2068348,	680781,		1423292,	885132,
							2495757,	3564622,	2416956,	7231743,	2113933,	693476,		1436326,	895005,
							2506843,	3614564,	2465490,	7264518,	2163117,	707269,		1450597,	905917,
							2518061,	3665220,	2514856,	7297970,	2213527,	721477,		1465384,	917293,
							2529079,	3714884,	2563152,	7330608,	2262549,	735240,		1479644,	928218,
							2540293,	3765643,	2612747,	7364306,	2313477,	749642,		1494690,	939846,
							2551458,	3816141,	2662050,	7397785,	2364052,	763939,		1509623,	951390,
							2562616,	3866691,	2711488,	7431407,	2414904,	778323,		1524647,	962992,
							2600826,	4054537,	2911726,	7580859,	2665490,	858011,		1619956,	1049295,
							2612329,	4107132,	2963771,	7616792,	2720911,	874095,		1637333,	1063339,
							2623841,	4159824,	3015981,	7652895,	2776690,	890316,		1654899,	1077573,
							2635360,	4212614,	3068358,	7689168,	2832832,	906674,		1672656,	1092000,
							2646889,	4265504,	3120903,	7725613,	2889339,	923173,		1690606,	1106623,
							2262271,	2706607,	1733184,	6852329,	1646552,	586357,		1346576,	840339,
							2273241,	2755405,	1780175,	6883879,	1693780,	599611,		1360343,	850940,
							2284023,	2803297,	1826202,	6914701,	1739762,	612460,		1373617,	861090,
							2294895,	2851694,	1872842,	6946031,	1786662,	625615,		1387263,	871569,
							2305830,	2900437,	1919886,	6977698,	1834205,	639005,		1401230,	882376,
							2316742,	2949138,	1966953,	7009419,	1881870,	652434,		1415232,	893203,
							2327699,	2998108,	2014358,	7041427,	1930067,	666043,		1429457,	904222,
							2338692,	3047295,	2062039,	7073682,	1978770,	679852,		1443978,	915567,
							2349668,	3096468,	2109763,	7105998,	2027587,	693687,		1458501,	926879,
							2386835,	3277414,	2301448,	7248652,	2266867,	770067,		1550533,	1011177,
							2398121,	3328421,	2351517,	7283057,	2319844,	785463,		1567245,	1024793,
							2409415,	3379520,	2401744,	7317623,	2373162,	800990,		1584138,	1038593,
							2420717,	3430714,	2452130,	7352353,	2426827,	816650,		1601215,	1052582,
							2432027,	3482006,	2502681,	7387249,	2480846,	832445,		1618481,	1066764,
							2041376,	1921712,	1128509,	6528642,	1263583,	502719,		1280721,	803593,
							2051947,	1968024,	1172567,	6557943,	1307125,	514876,		1293312,	813284,
							2062700,	2015309,	1217742,	6588133,	1352241,	527552,		1306522,	823508,
							2073388,	2062312,	1262653,	6618148,	1397087,	540146,		1319644,	833665,
							2083989,	2108906,	1307144,	6647857,	1441438,	552592,		1332607,	843706,
							2094817,	2156700,	1353006,	6678665,	1487756,	565697,		1346384,	854483,
							2105436,	2203463,	1397757,	6708621,	1532595,	578315,		1359562,	864711,
							2116184,	2250953,	1443378,	6739294,	1578735,	591372,		1373285,	875443,
							2126992,	2298775,	1489390,	6770297,	1625520,	604673,		1387357,	886545,
							2163039,	2472440,	1672105,	6905800,	1852751,	677433,		1475615,	968257,
							2174103,	2521822,	1720150,	6938632,	1903186,	692102,		1491601,	981379,
							2185175,	2571293,	1768346,	6971618,	1953948,	706895,		1507760,	994680,
							2196254,	2620853,	1816694,	7004759,	2005037,	721815,		1524096,	1008163,
							2207341,	2670509,	1865199,	7038059,	2056465,	736865,		1540613,	1021833,
							2218437,	2720260,	1913863,	7071520,	2108232,	752044,		1557312,	1035692,
							1821154,	1156223,	550275,		6224813,	910880,		427350,		1223065,	772868,
							1831690,	1201933,	593520,		6253528,	953656,		439366,		1235624,	782650,
							1842099,	1247035,	636130,		6281775,	995643,		451132,		1247895,	792187,
							1852569,	1292505,	679201,		6310411,	1038348,	463140,		1260465,	801999,
							1863161,	1338618,	723009,		6339643,	1082138,	475521,		1273508,	812254,
							1873574,	1383870,	765903,		6368182,	1124736,	487514,		1286081,	822093,
							1884114,	1429819,	809617,		6397389,	1168534,	499906,		1299139,	832356,
							1894640,	1475706,	853273,		6426566,	1212321,	512313,		1312245,	842695,
							1905241,	1522077,	897556,		6456280,	1257104,	525064,		1325789,	853452,
							1940191,	1688729,	1071782,	6585157,	1473481,	594700,		1411042,	933483,
							1951037,	1736539,	1117907,	6616525,	1521603,	608725,		1426412,	946222,
							1961889,	1784432,	1164173,	6648039,	1570033,	622868,		1441949,	959134,
							1972749,	1832414,	1210588,	6679702,	1618781,	637134,		1457658,	972226,
							1983617,	1880489,	1257155,	6711520,	1667853,	651525,		1473543,	985500,
							1994493,	1928651,	1303869,	6743486,	1717243,	666039,		1489601,	998957,
							2005377,	1976904,	1350733,	6775605,	1766959,	680678,		1505837,	1012602,
							1601061,	407954,		-3864,		5939112,	585826,		359574,		1173041,	747887,
							1611329,	451909,		37336,		5966314,	626240,		370931,		1184955,	757232,
							1621532,	495573,		78248,		5993312,	666333,		382195,		1196775,	766516,
							1631909,	540146,		120194,		6021140,	707920,		393964,		1209227,	776385,
						};



/*****************************************************
**				UTILITIES
*****************************************************/

/*****************************************************
**FUNCTION	::	InRange
**ACTION	::	return true if y belongs to [x,z] 
**PARAMS IN	::	x
**				y
**				z
**PARAMS OUT::	NONE
**RETURN	::	0 or 1
*****************************************************/
S32 InRange(S32 x,S32 y,S32 z) 
{
	return ((x<=y && y<=z) || (z<=y && y<=x))?1:0;
}

/*****************************************************
**FUNCTION	::	PowOf2
**ACTION	::	Compute  2^n (where n is an integer) 
**PARAMS IN	::	number -> n
**PARAMS OUT::	NONE
**RETURN	::	2^n
*****************************************************/
U32 PowOf2(int number)
{
	int i;
	U32 result=1;
	
	for(i=0;i<number;i++)
		result*=2;
		
	return result;
}

/*****************************************************
**FUNCTION	::	PowOfX
**ACTION	::	Compute  X^N (where X and N are integers) 
**PARAMS IN	::	number -> n
**PARAMS OUT::	NONE
**RETURN	::	2^n
*****************************************************/
long PowOfX(int X, int N)
{
	int i;
	long result=1;
	
	for(i=0;i<N;i++)
		result*=X;
		
	return result;
}

/*****************************************************
**FUNCTION	::	Log10Int
**ACTION	::	Compute  log(n) (where n is a long) 
**PARAMS IN	::	number -> n
**PARAMS OUT::	none
**RETURN	::	log(n)
*****************************************************/
short DSPnormalize(long *arg, short maxnorm)
{

	long input;
	int one, two, three, four;
	long  retval;
	input = (*arg<0)?~(*arg):*arg;

	one = ((unsigned char) (input >> 24));   
	two = ((unsigned char) (input >> 16));
	three = ((unsigned char)(input >> 8));
	four  = ((unsigned char)(input));
     
	retval = one ? l1d8[one]-1L  : two ? 7L+ l1d8[two] : three ? 15L + l1d8[three] : 23L + l1d8[four];
	return ((retval>maxnorm)? maxnorm:(short)(retval)); 


}

long MULT32X32(long a,long b)
{
	return ((((((long)(a>>16))*((long)(b>>16)))<<1)
			+((((long)(a>>16))*((long)(b&0x0000ffff)))>>15)
			+((((long)(b>>16))*((long)((a)&0x0000ffff)))>>15)));
}

long Log10Int(long logarg)
{
 	long powval1,powval2,powval3,powval4,powval5,powval6,powval7,powval8;
	long coeff0, coeff1, coeff2;
	long powexp_l;
	short powexp;
	int SignFlag = 0;
	
	/*Initialize coeffs 0.31 format*/
	coeff0	= 1422945213;		/* This coeff in 0.31 format;*/
	coeff1	= 2143609158;
	coeff2	= 724179374;

        /*Normalize power measure */
	powexp = DSPnormalize(&logarg, 32);
	logarg<<=powexp;
	
	if(powexp&0x8000)
	{
		SignFlag = 1;
		powexp	= -powexp;
	}
	
	powexp = 31 - powexp;
	powexp_l = ((long)(powexp)<<24);
	powval1 = powexp_l;
	powval4 = MULT32X32(logarg,coeff1);
	powval5 = coeff0 - powval4;
	powval2 = MULT32X32(logarg,logarg);
	powval3 = MULT32X32(powval2,coeff2);
	powval6 = powval5 + powval3;
	powval7 = powval6>>5;
	powval8 = powval1 - powval7;

	if(SignFlag ==1)
		powval8 = -powval8;
	
	return(powval8);	
	
}

/*****************************************************
**				STB0297E routines
*****************************************************/

/***********************************************************
**FUNCTION	::	Drv0297E_GetLLARevision
**ACTION	::	Returns the 297E LLA driver revision
**RETURN	::	Revision297e
***********************************************************/
ST_Revision_t Drv0297E_GetLLARevision(void)
{
	return (Revision297e);
}


FE_297e_Error_t FE_297e_Repeater(BOOL State)
{
	FE_297e_Error_t error = FE_297e_NO_ERROR;
	
	error = ChipSetField(F297e_I2CT_EN,(State==TRUE)?1:0);
	
	return error;
}



/*****************************************************
**FUNCTION	::	FE_297e_GetMclkFreq
**ACTION	::	Set the STB0297E master clock frequency
**PARAMS IN	::  	
**				ExtClk_Hz	==>	External clock frequency (Hz)
**PARAMS OUT::	NONE
**RETURN	::	MasterClock frequency (Hz)
*****************************************************/
U32 FE_297e_GetMclkFreq(U32 ExtClk_Hz)
{
	U32 mclk_Hz = 0;			/* master clock frequency (Hz) */
	
	if(ChipGetField(F297e_PLL_BYPASS) == 1)
		return ExtClk_Hz;
	else
	{
		mclk_Hz = 1 + ChipGetField(F297e_PLL_NDIV);
		mclk_Hz *= ExtClk_Hz;
	
		if (ChipGetField(F297e_PLL_CLKSEL) == 0)
			return (mclk_Hz/8);
		else
			return (mclk_Hz/16);
	}
}

/*****************************************************
**FUNCTION	::	FE_297e_GetADCFreq
**ACTION	::	Get the STB0297E ADC clock frequency
**PARAMS IN	::  
**				ExtClk_Hz	==>	External clock frequency (Hz)
**PARAMS OUT::	NONE
**RETURN	::	ADC Clock frequency (Hz)
*****************************************************/
U32 FE_297e_GetADCFreq(U32 ExtClk_Hz)
{
	U32 ADCClk_Hz = ExtClk_Hz;
	switch (ChipGetField(F297e_SEL_ADCLK))
	{
		case 0:
			ADCClk_Hz = FE_297e_GetMclkFreq(ExtClk_Hz);
			break;
		case 1:
			if (ChipGetField(F297e_BKP_MODE) == 1)
				ADCClk_Hz = FE_297e_GetMclkFreq( ExtClk_Hz)/2;
			else
				ADCClk_Hz = FE_297e_GetMclkFreq( ExtClk_Hz);
			break;
	}
	return ADCClk_Hz;
}
/*****************************************************
**FUNCTION	::	FE_297e_SetDerotFreq
**ACTION	::	Set the STB0297E derotator frequency
**PARAMS IN	::  
**				AdcClk_Hz		==>	ADC clock frequency (Hz)
**				DerotFreq_Hz	==>	Derotator frequency (Hz)
**PARAMS OUT::	NONE
**RETURN	::	DerotFreq_Hz
*****************************************************/
U32 FE_297e_SetDerotFreq(U32 AdcClk_Hz, U32 DerotFreq_Hz)
{
	U32 Sampled_IF = 0;
	U32 AdcClk_kHz;
	
	AdcClk_kHz = AdcClk_Hz/1000;
	
	if (AdcClk_kHz != 0)
	{
		if (DerotFreq_Hz>AdcClk_Hz)
		{
			DerotFreq_Hz = DerotFreq_Hz - AdcClk_Hz;
		}
		Sampled_IF = DerotFreq_Hz/1000;
		Sampled_IF *= 32768;
		Sampled_IF /= AdcClk_kHz;
		Sampled_IF *= 256;
	}
	
	if(Sampled_IF > 8388607) Sampled_IF = 8388607;

	ChipSetField(F297e_MIX_NCO_INC_LL,Sampled_IF);
	ChipSetField(F297e_MIX_NCO_INC_HL,(Sampled_IF>>8));
	ChipSetField(F297e_MIX_NCO_INC_HH,(Sampled_IF>>16));
	
	return DerotFreq_Hz;
}
/*****************************************************
**FUNCTION	::	FE_297e_GetDerotFreq
**ACTION	::	Get the STB0297E derotator frequency
**PARAMS IN	::
**				AdcClk_Hz	==>	ADC clock frequency (Hz)
**PARAMS OUT::	Derot frequency
**RETURN	::	Derotator frequency (Hz)
*****************************************************/
U32 FE_297e_GetDerotFreq( U32 AdcClk_Hz)
{
	U32 Sampled_IF;
	
	Sampled_IF = ChipGetField(F297e_MIX_NCO_INC_LL)
				+ (ChipGetField(F297e_MIX_NCO_INC_HL)<<8)
				+ (ChipGetField(F297e_MIX_NCO_INC_HH)<<16);

	Sampled_IF /= 256;
	Sampled_IF *= (AdcClk_Hz/1000);
	Sampled_IF += 1;
	Sampled_IF /= 32768;

	return Sampled_IF;
}
/*****************************************************
**FUNCTION	::	FE_297e_SetIirAdjacentcoefficient
**ACTION	::	Set the STB0297E IIR filter coefficients
**PARAMS IN	::
**				MasterClk_Hz	==>	Master frequency in Hz
**				SymbolRate	==>	Symbol rate in Bauds
**PARAMS OUT::	NONE
**RETURN	::	None
*****************************************************/
void FE_297e_SetIirAdjacentcoefficient( U32 MasterClk_Hz, U32 SymbolRate)
{
	U16 line=0,i;
	U32 Fn0,Fn1000,NormFreq;
	U16 rolloff;
	S32 coeff[6];
	U32 AdpClk_kHz;
	int temp1, temp2, temp3, temp4, temp5, temp6;
	
	/*
	To avoid using the IIR coefficients table they are approximated with polynomial functions.
	*/
	U16 Section, SectionLine;
 	S32 PolyC[48][4] =	{	/* a1[0] part */
							{5,		-19,	-754,	7721},
							{0,		-10,	-779,	6946},
							{11,		-23,	-794,	6151},
							{-4,		1,		-824,	5339},
							{-9,		1,		-839,	4505},
							{-2,		-9,		-859,	3653},
							{0,		-16,	-881,	2776},
							{-27,	7,		-920,	1871},
							/* a1[1] part */
							{-7,		115,	-1325,	7312},
							{12,		72,		-1114,	6087},
							{14,		48,		-939,	5047},
							{-6,		68,		-817,	4163},
							{0,		51,		-692,	3403},
							{-12,	68,		-595,	2758},
							{-4,		58,		-491,	2216},
							{0,		53,		-382,	1776},
							/* B1 part */
							{1,		148,	191,	-4035},
							{-16,	150,	486,	-3693},
							{-17,	134,	746,	-3065},
							{-40,	142,	950,	-2193},
							{-19,	75,		1124,	-1130},
							{-14,	35,		1219,	60},
							{-5,		-14,	1251,	1310},
							{-32,	-10,	1194,	2551},
							/* a2[0] part */
							{12,		-147,	-322,	8045},
							{5,		-127,	-587,	7583},
							{25,		-129,	-820,	6869},
							{-8,		-67,	-1038,	5935},
							{7,		-69,	-1190,	4813},
							{3,		-44,	-1310,	3551},
							{4,		-22,	-1387,	2189},
							{-5,		11,		-1421,	773},
							/* a2[1] part */
							{1,		4,		-282,	8011},
							{5,		-3,		-266,	7731},
							{12,		-10,	-252,	7465},
							{-3,		12,		-244,	7213},
							{-1,		10,		-227,	6976},
							{11,		-6,		-203,	6757},
							{1,		8,		-186,	6556},
							{11,		-1,		-161,	6378},
							/* B2 part */
							{-54,	408,	573,	-3908},
							{-65,	191,	1215,	-2973},
							{-49,	5,		1399,	-1621},
							{-7,		-108,	1284,	-253},
							{-6,		-103,	1031,	928},
							{-7,		-93,	798,	1856},
							{4,		-89,	601,	2560},
							{7,		-75,	440,	3080}
						};


	rolloff = ChipGetField(F297e_NYQ_COEFF_SEL);
	switch(rolloff)
	{
		case 0:
			rolloff = 112;
			break;
		case 1:
			rolloff = 113;
			break;
		case 2:
			rolloff = 115;
			break;
		case 3:
			rolloff = 118;
			break;
		default:
			rolloff = 115;
			break;
	}

	Fn0 = 36800; 	/* 1000000*1.15 * 0.8/25 */
	Fn1000 = 496800; /* 1000000*1.15*10.8/25 */
	
	AdpClk_kHz = (MasterClk_Hz>>1)/1000; 

	if (AdpClk_kHz != 0)
	{
		NormFreq = SymbolRate*rolloff;
		NormFreq = NormFreq/AdpClk_kHz; 
		NormFreq *= 10;/* 1000000*rolloff*Fs/Fadp */
		line = (NormFreq - Fn0)/460; /* 1000*(NormFreq-Fn0)/(Fn1000-Fn0) */
	}

	if(line> 999)	line=999;
	Section = (U16)(line/128); /* Section goes from 0 to 7 */
	SectionLine = line + 1 - (Section * 128); /* SectionLine goes from 1 to 128 */
	
	for(i=0;i<6;i++)
	{
		/*coeff[i] = 	( PolyC[Section + 8*i][3] +
					( ( (SectionLine*PolyC[Section + 8*i][2]*8192) +
					( ( (S32)( (PowOfX(SectionLine,2)*PolyC[Section + 8*i][1]*128) ) +
					( (S32)( (PowOfX(SectionLine,3)*PolyC[Section + 8*i][0]) ) ) )>>1) )>>20) )>>3;*/
		temp1 = PolyC[Section + 8*i][3];
		temp2 = SectionLine*PolyC[Section + 8*i][2]*8192;
		temp3 = (int) (PowOfX(SectionLine,2)*PolyC[Section + 8*i][1]*128);
		temp4 = (int) (PowOfX(SectionLine,3)*PolyC[Section + 8*i][0]);
		/*temp5 = (temp3 + temp4)>>1;
		temp6 =  (temp5 + temp2)>>20;
		coeff[i] = (temp6+temp1)>>3;*/
		temp5 = (temp3 + temp4)/2;
		temp6 =  (temp5 + temp2)/1048576; /*2^20*/
		coeff[i] = (temp6+temp1)/8;  /*2^3*/
	}

	if (coeff[2] <0)	coeff[2] += 1024;
	if (coeff[5] <0)	coeff[5] += 1024;
	
	ChipSetField(F297e_ADJIIR_COEFF10_L,coeff[0]);
	ChipSetField(F297e_ADJIIR_COEFF10_H,(coeff[0])>>8);
	ChipSetField(F297e_ADJIIR_COEFF11_L,coeff[1]);
	ChipSetField(F297e_ADJIIR_COEFF11_H,(coeff[1])>>6);
	ChipSetField(F297e_ADJIIR_COEFF12_L,coeff[2]);
	ChipSetField(F297e_ADJIIR_COEFF12_H,(coeff[2])>>4);
	ChipSetField(F297e_ADJIIR_COEFF20_L,coeff[3]);
	ChipSetField(F297e_ADJIIR_COEFF20_H,(coeff[3])>>2);
	ChipSetField(F297e_ADJIIR_COEFF21_L,coeff[4]);
	ChipSetField(F297e_ADJIIR_COEFF21_H,(coeff[4])>>8);
	ChipSetField(F297e_ADJIIR_COEFF22_L,coeff[5]);
	ChipSetField(F297e_ADJIIR_COEFF22_H,(coeff[5])>>6);
	
	return;
}


/*****************************************************
**FUNCTION	::	FE_297e_SetAllPasscoefficient
**ACTION	::	Set the STB0297E Allpass filter coefficients
**PARAMS IN	::
**				MasterClk_Hz	==>	Master frequency in Hz
**				SymbolRate	==>	Symbol rate in Bauds
**PARAMS OUT::	NONE
**RETURN	::	None
*****************************************************/
void FE_297e_SetAllPasscoefficient(U32 MasterClk_Hz, U32 SymbolRate)
{
	U32 line=0;
	U32 Fn0,Fn900,NormFreq;
	U16 rolloff;
	U16 i;
	S32 c[8]={0};
	U32 AdpClk_kHz;
	
	rolloff = ChipGetField(F297e_NYQ_COEFF_SEL);
	switch(rolloff)
	{
		case 0:
			rolloff = 112;
			break;
		case 1:
			rolloff = 113;
			break;
		case 2:
			rolloff = 115;
			break;
		case 3:
			rolloff = 118;
			break;
		default:
			rolloff = 115;
			break;
	}

	Fn0 = 82800; 	/* 1000000*1.15 * 1.8/25 */
	Fn900 = 496800; /* 1000000*1.15*10.8/25 */
	
	AdpClk_kHz = (MasterClk_Hz>>1)/1000; 
	if (AdpClk_kHz != 0)
	{
		NormFreq = SymbolRate*rolloff;
		NormFreq = NormFreq/AdpClk_kHz; 
		NormFreq *= 10;/* 1000000*rolloff*Fs/Fadp */
		line = (NormFreq - Fn0)/460; /* 900*(NormFreq-Fn0)/(Fn900-Fn0) */
	}

	if(line>= 900) line=899;

	for (i=0;i<=7;i++)
		c[i] = AllPass[line][i];


	ChipSetField(F297e_ALLPASSFILT_COEFF1_LO,c[0]);
	ChipSetField(F297e_ALLPASSFILT_COEFF1_ME,(c[0])>>8);
	ChipSetField(F297e_ALLPASSFILT_COEFF1_HI,(c[0])>>16);
	ChipSetField(F297e_ALLPASSFILT_COEFF2_LO,c[1]);
	ChipSetField(F297e_ALLPASSFILT_COEFF2_ME,(c[1])>>8);
	ChipSetField(F297e_ALLPASSFILT_COEFF2_HI,(c[1])>>16);
	ChipSetField(F297e_ALLPASSFILT_COEFF2_HI2,(c[1])>>24);
	ChipSetField(F297e_ALLPASSFILT_COEFF3_LO,c[2]);
	ChipSetField(F297e_ALLPASSFILT_COEFF3_ME,(c[2])>>6);
	ChipSetField(F297e_ALLPASSFILT_COEFF3_HI,(c[2])>>14);
	ChipSetField(F297e_ALLPASSFILT_COEFF3_HI2,(c[2])>>22);
	ChipSetField(F297e_ALLPASSFILT_COEFF4_LO,c[3]);
	ChipSetField(F297e_ALLPASSFILT_COEFF4_ME,(c[3])>>4);
	ChipSetField(F297e_ALLPASSFILT_COEFF4_HI,(c[3])>>12);
	ChipSetField(F297e_ALLPASSFILT_COEFF4_HI2,(c[3])>>20);
	ChipSetField(F297e_ALLPASSFILT_COEFF5_LO,c[4]);
	ChipSetField(F297e_ALLPASSFILT_COEFF5_ME,(c[4])>>2);
	ChipSetField(F297e_ALLPASSFILT_COEFF5_HI,(c[4])>>10);
	ChipSetField(F297e_ALLPASSFILT_COEFF5_HI2,(c[4])>>18);
	ChipSetField(F297e_ALLPASSFILT_COEFF6_LO,c[5]);
	ChipSetField(F297e_ALLPASSFILT_COEFF6_ME,(c[5])>>8);
	ChipSetField(F297e_ALLPASSFILT_COEFF6_HI,(c[5])>>16);
	ChipSetField(F297e_ALLPASSFILT_COEFF7_LO,c[6]);
	ChipSetField(F297e_ALLPASSFILT_COEFF7_ME,(c[6])>>8);
	ChipSetField(F297e_ALLPASSFILT_COEFF7_HI,(c[6])>>16);
	ChipSetField(F297e_ALLPASSFILT_COEFF8_LO,c[7]);
	ChipSetField(F297e_ALLPASSFILT_COEFF8_ME,(c[7])>>8);
	ChipSetField(F297e_ALLPASSFILT_COEFF8_HI,(c[7])>>16);

	return;
}
/*****************************************************
**FUNCTION	::	FE_297e_SetSymbolRate
**ACTION	::	Set symbol frequency
**PARAMS IN	::
**				AdcClk_Hz	->	ADC frequency (Hz)
**				MasterClk_Hz	->	Master frequency (Hz)
**				SymbolRate	->	symbol rate (bauds)
**				QAMSize		->	QAM size
**PARAMS OUT::	NONE
**RETURN	::	Symbol frequency
*****************************************************/
U32 FE_297e_SetSymbolRate( U32 AdcClk_Hz,U32 MasterClk_Hz,U32 SymbolRate, FE_297e_Modulation_t QAMSize)
{
	U32 QamSizeCorr=0;
	U32 u32_tmp=0, u32_tmp1=0;
	U32 AdpClk_kHz;
	
	/* Set Correction factor of SRC gain */
	switch (QAMSize)
	{
		case FE_297e_MOD_QAM4:
			QamSizeCorr = 1110;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM16:
			QamSizeCorr = 1032;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM32:
			QamSizeCorr =  954;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM64:
			QamSizeCorr =  983;
			ChipSetField(F297e_ADJ_AGC_REF,0x82);/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM128:
			QamSizeCorr =  957;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM256:
			QamSizeCorr =  948;
			ChipSetField(F297e_ADJ_AGC_REF,0x94);/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM512:
			QamSizeCorr =    0;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		case FE_297e_MOD_QAM1024:
			QamSizeCorr =  944;
			ChipSetField(F297e_ADJ_AGC_REF,0x0);	/* Set digital AGC reference */
			break;
		default:
			break;
	}
	
	/* Transfer ratio calculation */
	if (AdcClk_Hz != 0)
	{
		u32_tmp = 256* SymbolRate;
		u32_tmp = u32_tmp/AdcClk_Hz;
	}
	ChipSetOneRegister(R297e_EQU_CRL_TFR,(U8)u32_tmp);

	/* Symbol rate and SRC gain calculation */
	AdpClk_kHz = (MasterClk_Hz>>1)/1000; /* TRL works at half the system clock */
	if (AdpClk_kHz != 0)
	{
		u32_tmp = SymbolRate;
		u32_tmp1 = SymbolRate;

		if(u32_tmp < 2097152)				/* 2097152 = 2^21 */
		{
			/* Symbol rate calculation */
			u32_tmp *= 2048;				/* 2048 = 2^11 */
			u32_tmp = u32_tmp /AdpClk_kHz;
			u32_tmp = u32_tmp * 16384;		/* 16384 = 2^14 */
			u32_tmp /= 125 ;				/* 125 = 1000/2^3 */
			u32_tmp = u32_tmp * 8;			/* 8 = 2^3 */
	
			/* SRC Gain Calculation */
			u32_tmp1 *= 2048;				/* *2*2^10 */
			u32_tmp1 /= 439;				/* *2/878 */
			u32_tmp1 *= 256;				/* *2^8 */
			u32_tmp1 = u32_tmp1/AdpClk_kHz;	/* /(AdpClk in kHz) */
			u32_tmp1 *= QamSizeCorr*9;		/* *1000*corr factor */
			u32_tmp1 = u32_tmp1/10000000;
		
		}
		else if(u32_tmp < 4194304)			/* 4194304 = 2**22 */
		{
			/* Symbol rate calculation */
			u32_tmp *= 1024 ;				/* 1024 = 2**10 */
			u32_tmp = u32_tmp /AdpClk_kHz;
			u32_tmp = u32_tmp * 16384;		/* 16384 = 2**14 */
			u32_tmp /= 125 ;				/* 125 = 1000/2**3 */
			u32_tmp = u32_tmp * 16; 		/* 16 = 2**4 */

			/* SRC Gain Calculation */
			u32_tmp1 *= 1024;				/* *2*2^9 */
			u32_tmp1 /= 439;				/* *2/878 */
			u32_tmp1 *= 256;				/* *2^8 */
			u32_tmp1 = u32_tmp1/AdpClk_kHz;	/* /(AdpClk in kHz)*/
			u32_tmp1 *= QamSizeCorr*9;		/* *1000*corr factor */
			u32_tmp1 = u32_tmp1/5000000;
		}
		else if(u32_tmp < 8388607)			/* 8388607 = 2**23 */
		{
			/* Symbol rate calculation */
			u32_tmp *= 512; 				/* 512 = 2**9 */
			u32_tmp = u32_tmp /AdpClk_kHz;
			u32_tmp = u32_tmp * 16384;		/* 16384 = 2**14 */
			u32_tmp /= 125; 				/* 125 = 1000/2**3 */
			u32_tmp = u32_tmp * 32; 		/* 32 = 2**5 */

			/* SRC Gain Calculation */
			u32_tmp1 *= 512;				/* *2*2^8 */
			u32_tmp1 /= 439;				/* *2/878 */
			u32_tmp1 *= 256;				/* *2^8 */
			u32_tmp1 = u32_tmp1/AdpClk_kHz;	/* /(AdpClk in kHz) */
			u32_tmp1 *= QamSizeCorr*9;		/* *1000*corr factor */
			u32_tmp1 = u32_tmp1/2500000;

		}
		else
		{
			/* Symbol rate calculation */
			u32_tmp *= 256 ;				/* 256 = 2**8 */
			u32_tmp = u32_tmp /AdpClk_kHz;
			u32_tmp = u32_tmp * 16384;		/* 16384 = 2**13 */
			u32_tmp /= 125 ;				/* 125 = 1000/2**3 */
			u32_tmp = u32_tmp * 64; 		/* 64 = 2**6 */

			/* SRC Gain Calculation */
			u32_tmp1 *= 256;				/* 2*2^7 */
			u32_tmp1 /= 439;				/* *2/878 */
			u32_tmp1 *= 256;				/* *2^8 */
			u32_tmp1 = u32_tmp1/AdpClk_kHz;	/* /(AdpClk in kHz) */
			u32_tmp1 *= QamSizeCorr*9;		/* *1000*corr factor */
			u32_tmp1 = u32_tmp1/1250000;
		}
	}

	/* Filters' coefficients are calculated and written into registers only if the filters are enabled */
	if (ChipGetField(F297e_ADJ_EN))
	{
		FE_297e_SetIirAdjacentcoefficient( MasterClk_Hz, SymbolRate);
		/* AllPass filter must be enabled when the adjacents filter is used */
		ChipSetField(F297e_ALLPASSFILT_EN,1);
		FE_297e_SetAllPasscoefficient( MasterClk_Hz, SymbolRate);
	}
	else
		/* AllPass filter must be disabled when the adjacents filter is not used */
		ChipSetField(F297e_ALLPASSFILT_EN,0);

	
	ChipSetField(F297e_SRC_NCO_INC_LL,u32_tmp);
	ChipSetField(F297e_SRC_NCO_INC_LH,(u32_tmp>>8));
	ChipSetField(F297e_SRC_NCO_INC_HL,(u32_tmp>>16));
	ChipSetField(F297e_SRC_NCO_INC_HH,(u32_tmp>>24));
	
	ChipSetField(F297e_GAIN_SRC_LO,u32_tmp1&0x00ff);
	ChipSetField(F297e_GAIN_SRC_HI,(u32_tmp1>>8)&0x00ff);
	return(SymbolRate) ;
}
/*****************************************************
**FUNCTION	::	FE_297e_GetSymbolRate
**ACTION	::	Get the current symbol rate
**PARAMS IN	::
**				MasterClk_Hz->	Master frequency (Hz)
**PARAMS OUT::	NONE
**RETURN	::	Symbol rate
*****************************************************/
U32 FE_297e_GetSymbolRate( U32 MasterClk_Hz)
{
	U32 regsym;
	U32 AdpClk_kHz;
	
	regsym = ChipGetField(F297e_SRC_NCO_INC_LL)
	         + (ChipGetField(F297e_SRC_NCO_INC_LH)<<8)
	         + (ChipGetField(F297e_SRC_NCO_INC_HL)<<16)
	         + (ChipGetField(F297e_SRC_NCO_INC_HH)<<24);
	
	AdpClk_kHz = (MasterClk_Hz>>1)/1000; /* TRL works at half the system clock */

	if(regsym < 134217728)				/* 134217728L = 2**27*/
	{
		regsym = regsym * 32;			/* 32 = 2**5 */
		regsym = regsym / 32768;		/* 32768L = 2**15 */
		regsym = AdpClk_kHz * regsym;	/* AdpClk in kHz */
		regsym = regsym/128;			/* 128 = 2**7 */
		regsym *= 125 ;					/* 125 = 1000/2**3 */
		regsym /= 2048 ;				/* 2048 = 2**11	*/
	}
	else if(regsym < 268435456)		/* 268435456L = 2**28 */
	{
		regsym = regsym * 16;			/* 16 = 2**4 */
		regsym = regsym / 32768;		/* 32768L = 2**15 */
		regsym = AdpClk_kHz * regsym;	/* AdpClk in kHz */
		regsym = regsym/128;			/* 128 = 2**7 */
		regsym *= 125 ;					/* 125 = 1000/2**3*/
		regsym /= 1024 ; 				/* 256 = 2**10*/
	}
	else if(regsym < 536870912)		/* 536870912L = 2**29*/
	{  
		regsym = regsym * 8;			/* 8 = 2**3 */
		regsym = regsym / 32768;		/* 32768L = 2**15 */
		regsym = AdpClk_kHz * regsym;	/* AdpClk in kHz */
		regsym = regsym/128;			/* 128 = 2**7 */
		regsym *= 125 ;					/* 125 = 1000/2**3 */
		regsym /= 512 ; 				/* 128 = 2**9 */
	}
	else
	{
		regsym = regsym * 4;			/* 4 = 2**2 */
		regsym = regsym / 32768;		/* 32768L = 2**15 */
		regsym = AdpClk_kHz * regsym;	/* AdpClk in kHz */
		regsym = regsym/128;			/* 128 = 2**7 */
		regsym *= 125 ;					/* 125 = 1000/2**3 */
		regsym /= 256 ; 				/* 64 = 2**8 */	  
	}
	return(regsym);
}
/*****************************************************
**FUNCTION	::	FE_297e_SetSweepRate
**ACTION	::	Set the current sweep rate
**PARAMS IN	::
**				AdcClk_Hz		->	ADC frequency (Hz)
**				SymbolRate_Bds	->	Symbol rate (Hz)
**				SweepRate_Hz	->	Sweep rate (Hz)
**				QAMSize			->	QAM size
**PARAMS OUT::	NONE
**RETURN	::	Sweep rate
*****************************************************/
U32 FE_297e_SetSweepRate(U32 AdcClk_Hz,U32 SymbolRate_Bds,
							U32 SweepRate_Hz,FE_297e_Modulation_t QAMSize)
{
/*
	U32 u32_tmp;
	if (SymbolRate_Bds != 0)
	{
		u32_tmp = SweepRate_Hz*256;
		u32_tmp /= (SymbolRate_Bds/1000);
		
	}
*/	return SweepRate_Hz;
}

/*****************************************************
**FUNCTION	::	FE_297e_SetSweepRange
**ACTION	::	Set the current sweep range
**PARAMS IN	::
**				AdcClk_Hz		->	ADC frequency (Hz)
**				SymbolRate_Bds	->	Symbol rate (Hz)
**				SearchRange_Hz	->	Sweep range (Hz)
**PARAMS OUT::	NONE
**RETURN	::	Sweep range
*****************************************************/
S32 FE_297e_SetSweepRange(U32 AdcClk_Hz,U32 SymbolRate_Bds, S32 SearchRange_Hz)
{

/* To be done
	unsigned long Fs = RegGetSymbolRate(hChip)/1000; // in kHz
	U32 range=0;
	long adc_clk = GetAdcClk(hChip)/1000; //in kHz
	STCHIP_Error_t error=CHIPERR_NO_ERROR;
	
	if (AdcClk_Hz != 0)
	{
	range = (U32)((SearchRange_Hz<0)? -SearchRange_Hz:SearchRange_Hz);
	
	}
	range = range_per*Fs*128;	// percentage*10000*Fs*2^7
	range = range/adc_clk;
	range *= 32768;				// *2^15
	range = range/5000;			// *2/10000

	ChipSetField(hChip,F_SWEEP_RANGE_LO,range);
	ChipSetField(hChip,F_SWEEP_RANGE_HI,(range>>8));
*/
	return SearchRange_Hz;
}

/*****************************************************
**FUNCTION	::	FE_297e_SetQamSize
**ACTION	::	Set the QAM size and some related parameters
**PARAMS IN	::
**				QAMSize			->	QAM size)
**PARAMS OUT::	NONE
**RETURN	::	QAM size
*****************************************************/
FE_297e_Modulation_t FE_297e_SetQamSize(U32 SearchFreq_Khz, FE_297e_Modulation_t QAMSize)
{

	CH_TunerType_t TunerType;

	TunerType = ch_Tuner_GetTunerType();
	ChipSetField(F297e_QAM_MODE,QAMSize);

	switch(QAMSize)
	{
		case FE_297e_MOD_QAM4:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x63);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,3);					/* Set the Tracker Low Gain starting point */
			break;
			
		case FE_297e_MOD_QAM16:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x64);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,10);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,1);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/
			switch(TunerType)
			{
			/*to modify the registers values*/	
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference for CD1616LF*/    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					} 
					
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add*/					
				case TUNER_PLL_CD11XX:
						ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference for CD1616LF*/    
						/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
						if (SearchFreq_Khz<455000){ 
							ChipSetField(F297e_AGC_RF_TH_LO,0xff);
							ChipSetField(F297e_AGC_RF_TH_HI,0xb);
							ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
							ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
							ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
							ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
						} 
						
						/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
						else{
							ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
							ChipSetField(F297e_AGC_RF_TH_HI,0xa);
							ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
							ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
							ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
							ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
						}
					  break;
/**************/					
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
							
				default:
					break;
			}
			break;
			
		case FE_297e_MOD_QAM32:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x6e);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,3);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,1);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,63);				/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,3);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType)
			{
			/*to modify the registers values*/	
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					} 
					
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add*/
					case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					} 
					
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;	
/**************/					
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
									
				default:
					break;
			}
			
			break;
			
		case FE_297e_MOD_QAM64:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x5a);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,1);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,0x19);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,3);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType)
				{
				
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					} 
					
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add for 64QAM SETTING*/					
			case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					} 
					
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/***************/						
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
		
				default:
					break;
			}
			
			break;
			
		case FE_297e_MOD_QAM128:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x76);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,6);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,63);				/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,1);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType)
				{
			/*to modify the registers values*/	
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add*/
				case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;					
/********************/										
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
									
				default:
					break;
			}
			
			break;
			
		case FE_297e_MOD_QAM256:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x5a);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,2);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType){
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x46);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x76);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xd);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xc0);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x76);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xd);
					}
					break;
/*20080114 add*/					
				case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x46);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x76);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xd);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xc0);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x76);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xd);
					}
					break;	
/******************/					
				case TUNER_PLL_THOMSON_DCT7042A:						
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0xb6);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xb);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
									
				default:
					break;
			}
						
			break;
			
		case FE_297e_MOD_QAM512:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x73);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,0);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType){
			/*to modify the registers values*/	
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add*/					
				case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;					
/*****************/					
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
							
				default:
					break;
			}
			
			break;
			
		case FE_297e_MOD_QAM1024:
			ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x73);	/* Set analog AGC reference */
			ChipSetField(F297e_CTR_GAIN,0);				/* Set the carrier tracker gain */
			ChipSetField(F297e_CRL_GDIR,2);				/* Set the carrier recovery direct gain */
			ChipSetField(F297e_LIMANEN,0);					/* Configure the angle limitation */
			ChipSetField(F297e_CRL_LD_SEN,5);				/* Configure the CRL lock detector sensitivity */
			ChipSetField(F297e_CRL_LIM,0);					/* Configure the CRL lock timer */
			ChipSetField(F297e_PNT_GAIN,39);				/* Configure the PNT gaain */
			ChipSetField(F297e_CTRLG_START,0);					/* Set the Tracker Low Gain starting point */
			
			/* the AGC setting changes according to the different Tuners*/ 
			switch(TunerType){
			/*to modify the registers values*/	
				case TUNER_PLL_CD1616LF:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;
/*20080114 add*/
					case TUNER_PLL_CD11XX:
					ChipSetOneRegister(R297e_AGC_PWR_REF_L,0x41);	/* Set analog AGC reference */    
					/* AGC setting for TUNER_CD1616LF when freq<455MHz*/  
					if (SearchFreq_Khz<455000){ 
						ChipSetField(F297e_AGC_RF_TH_LO,0xff);
						ChipSetField(F297e_AGC_RF_TH_HI,0xb);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					/* AGC setting for TUNER_CD1616LF when freq>455MHz*/ 
					else{
						ChipSetField(F297e_AGC_RF_TH_LO,0xdd);
						ChipSetField(F297e_AGC_RF_TH_HI,0xa);
						ChipSetField(F297e_AGC_IF_THLO_LO,0xcc);
						ChipSetField(F297e_AGC_IF_THLO_HI,0x08);
						ChipSetField(F297e_AGC_IF_THHI_LO,0x59);
						ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					}
					break;	
/***************/					
				case TUNER_PLL_THOMSON_DCT7042A:
					ChipSetField(F297e_AGC_RF_TH_LO,0xff);
					ChipSetField(F297e_AGC_RF_TH_HI,0xb);
					ChipSetField(F297e_AGC_IF_THLO_LO,0x99);
					ChipSetField(F297e_AGC_IF_THLO_HI,0x9);
					ChipSetField(F297e_AGC_IF_THHI_LO,0x68);
					ChipSetField(F297e_AGC_IF_THHI_HI,0xe);
					break;

				case TUNER_PLL_DCT70700:
						/* No configuration file available */ 
					break;
				
				default:
					break;
			}
			
			break;
			
		default:
			break;
	}
	return QAMSize;
}

/**/
void FE_297e_GetWaitingTime(FE_297e_Modulation_t QAMSize, U32 SymbolRate_Bds,FE_297e_Monitor *Monitor_results)
{
	U32    NbBitsmSec=0, WaitingTime;
	
	switch (QAMSize)
	{
		case FE_297e_MOD_QAM4:
			NbBitsmSec = (2*SymbolRate_Bds)/1000;
			break;
		case FE_297e_MOD_QAM16:
			NbBitsmSec = (4*SymbolRate_Bds)/1000;
			break;
		case FE_297e_MOD_QAM32:
			NbBitsmSec = (5*SymbolRate_Bds)/1000;
   			break;
   		case FE_297e_MOD_QAM64:
			NbBitsmSec = (6*SymbolRate_Bds)/1000;
   			break;
   		case FE_297e_MOD_QAM128:
			NbBitsmSec = (7*SymbolRate_Bds)/1000;
   			break;
   		case FE_297e_MOD_QAM256:
			NbBitsmSec = (8*SymbolRate_Bds)/1000;
   			break;
   		case FE_297e_MOD_QAM512:
			NbBitsmSec = (9*SymbolRate_Bds)/1000;
   			break;
   		case FE_297e_MOD_QAM1024:
			NbBitsmSec = (10*SymbolRate_Bds)/1000;
   			break;
	}
	if(NbBitsmSec == 0)
		WaitingTime = 0;
	else
		WaitingTime = 32768*PowOf2(2*ChipGetField(F297e_BERT_NBYTE))/NbBitsmSec;
	Monitor_results->FE_297e_WaitingTime = WaitingTime;
}

/**/
void FE_297e_SaturationComputation(FE_297e_Monitor *Monitor_results)
{

	U32 u32_tmp;
	/*
	In order to get a smooth saturation value, this is filtered
	woith a low-pass filter : sat(n) = 0.25*sat(n-1) + 0.75*acc(n)
	FE_297e_BER_Reg = accumulator value
	FE_297e_Saturation = low-pass filter memory
	*/
	
	u32_tmp = Monitor_results->FE_297e_BER_Reg;
	if(Monitor_results->FE_297e_Saturation > u32_tmp)
	{
		Monitor_results->FE_297e_Saturation = (9*Monitor_results->FE_297e_Saturation)/10;
		Monitor_results->FE_297e_Saturation += u32_tmp/10;
	}
	else
	{
		Monitor_results->FE_297e_Saturation = (25*Monitor_results->FE_297e_Saturation)/100;
		Monitor_results->FE_297e_Saturation += (75*u32_tmp)/100;
	}
	if(Monitor_results->FE_297e_Saturation > 65535) Monitor_results->FE_297e_Saturation = 65535;

	return ;
}

/*****************************************************
**FUNCTION	::	FE_297e_GetBERCount
**ACTION	::	return 10^7*BER in u32 and BER in double format
**PARAMS IN ::	*Monitor_results => pointer to the counters structure
**PARAMS OUT::	NONE
**RETURN	::	None
*****************************************************/
void FE_297e_GetBERCount(FE_297e_Monitor *Monitor_results)
{
	U32 u32_tmp, NByte;
	U8 temp=1;
	U16 timeoutcount = 1000;

	u32_tmp = ChipGetField(F297e_BERT_ERRCOUNT_L) + (ChipGetField(F297e_BERT_ERRCOUNT_H)<<8);
	if(ChipGetField(F297e_BERT_ERR_MODE) == 0) /* rate mode */
	{
		while(timeoutcount>0) /* waiting for the previous count to finish */
		{
			timeoutcount--;
			temp=ChipGetField(F297e_BERT_ON);
			if (temp == 0)
			{
				break;
			}
		}
		    /*STOS_TaskDelay(ST_GetClocksPerSecond());*/ /*giving reasonable amount of time for the BER calculation*/
			Monitor_results->FE_297e_BER_Reg = u32_tmp;
			u32_tmp = ChipGetField(F297e_BERT_NBYTE);
			NByte = PowOf2(2*u32_tmp + 12);
			if(ChipGetField(F297e_BERT_ERR_SRC) == 0) /* bit count */
			{
				Monitor_results->FE_297e_BER_U32 = (50000*Monitor_results->FE_297e_BER_Reg);
				Monitor_results->FE_297e_BER_U32 /= NByte;
				Monitor_results->FE_297e_BER_U32 *= 25;
				/*#if !defined(NO_GUI) || defined(DLL)
					Monitor_results->FE_297e_BER_Dbl = (double)Monitor_results->FE_297e_BER_Reg/(8*NByte);
				#endif							*/
			}
			else             /* byte count */
			{
				Monitor_results->FE_297e_BER_U32 = (50000*Monitor_results->FE_297e_BER_Reg);
				Monitor_results->FE_297e_BER_U32 /= NByte;
				Monitor_results->FE_297e_BER_U32 *= 200;
			}
			ChipSetField(F297e_BERT_ON,1) ; 			/* Restart a new count */
	}
	else  /* Count mode */
	{
		Monitor_results->FE_297e_BER_U32 = u32_tmp;
	}
	FE_297e_SaturationComputation(Monitor_results); 
	return;
}

void FE_297e_OptimiseNByteAndGetBER(FE_297e_Modulation_t QAMSize,U32 SymbolRate_Bds,FE_297e_Monitor *Monitor_results)
{
	U32 WaitingTime, Saturation, NByte,i=0;

	FE_297e_GetWaitingTime(QAMSize,SymbolRate_Bds,Monitor_results);
	FE_297e_GetBERCount(Monitor_results);
	
	Saturation = Monitor_results->FE_297e_Saturation;
	WaitingTime = Monitor_results->FE_297e_WaitingTime;
	NByte = ChipGetField(F297e_BERT_NBYTE);
	
	while((((Saturation<10)&(NByte<6))|(((Saturation>32768)|(WaitingTime>3500))&(NByte>0)))&(i<10))
	{
		i++;
		if (((Saturation > 32768)|(WaitingTime>3500))&(NByte>0))
		{
			ChipSetField(F297e_BERT_NBYTE,NByte-1);
			FE_297e_GetWaitingTime(QAMSize,SymbolRate_Bds,Monitor_results);
			WaitingTime = Monitor_results->FE_297e_WaitingTime;
			if (WaitingTime<200)
				ChipSetField(F297e_BERT_NBYTE,NByte);
		}
		if ((Saturation < 10)&&(NByte<6))
		{
			ChipSetField(F297e_BERT_NBYTE,NByte+1);
			FE_297e_GetWaitingTime(QAMSize,SymbolRate_Bds,Monitor_results);
			WaitingTime = Monitor_results->FE_297e_WaitingTime;
			if (WaitingTime>3500)
				ChipSetField(F297e_BERT_NBYTE,NByte);
		}
		FE_297e_GetWaitingTime(QAMSize,SymbolRate_Bds,Monitor_results);
		FE_297e_GetBERCount(Monitor_results);
		Saturation = Monitor_results->FE_297e_Saturation;
		WaitingTime = Monitor_results->FE_297e_WaitingTime;
		
		NByte = ChipGetField(F297e_BERT_NBYTE);
	}

	return;
}

/**/
void FE_297e_GetPacketsCount(FE_297e_Monitor *Monitor_results)
{
	U32 u32_tmp=0;

	ChipSetField(F297e_CT_HOLD,1);
	u32_tmp = ChipGetField(F297e_BK_CT_L) + (ChipGetField(F297e_BK_CT_H)<<8);
	if(Monitor_results->FE_297e_TotalBlocksOld > u32_tmp)
		Monitor_results->FE_297e_TotalBlocksOffset += 65536 ;
	Monitor_results->FE_297e_TotalBlocksOld = u32_tmp ;
	Monitor_results->FE_297e_TotalBlocks = Monitor_results->FE_297e_TotalBlocksOffset + u32_tmp ;
	/**/
	u32_tmp = ChipGetField(F297e_CORR_CT_L) + (ChipGetField(F297e_CORR_CT_H)<<8);
	if(Monitor_results->FE_297e_TotalCBOld > u32_tmp)
		Monitor_results->FE_297e_TotalCBOffset += 65536 ;
	Monitor_results->FE_297e_TotalCBOld = u32_tmp ;
	Monitor_results->FE_297e_TotalCB = Monitor_results->FE_297e_TotalCBOffset + u32_tmp ;
	/**/
	u32_tmp = ChipGetField(F297e_UNCORR_CT_L) + (ChipGetField(F297e_UNCORR_CT_H)<<8);
	if(Monitor_results->FE_297e_TotalUCBOld > u32_tmp)
		Monitor_results->FE_297e_TotalUCBOffset += 65536 ;
	Monitor_results->FE_297e_TotalUCBOld = u32_tmp ;
	Monitor_results->FE_297e_TotalUCB = Monitor_results->FE_297e_TotalUCBOffset + u32_tmp ;
	ChipSetField(F297e_CT_HOLD,0);
	
	return;
}

/*****************************************************
**FUNCTION	::	FE_297e_GetErrorCount
**ACTION	::	return the number of error
**PARAMS IN	::	hChip		=>	Handle to the chip
**PARAMS IN ::	*Monitor_results => pointer to the counters structure
**PARAMS OUT::	NONE
**RETURN	::	None
*****************************************************/
void FE_297e_GetErrorCount(FE_297e_Modulation_t QAMSize, U32 SymbolRate_Bds, FE_297e_Monitor *Monitor_results)
{
	FE_297e_OptimiseNByteAndGetBER(QAMSize,SymbolRate_Bds,Monitor_results);
	FE_297e_GetPacketsCount(Monitor_results);

	return;
}

/*
Clears all the Counters
*/
void FE_297e_ClearCounters( FE_297e_Monitor *Monitor_results)
{
	ChipSetOneRegister(R297e_BERT_0,0x00); /* Clear blocks counters */
	ChipSetOneRegister(R297e_BERT_0,0x01); /* Enable block counters */
	
	Monitor_results->FE_297e_TotalBlocks = 0;
	Monitor_results->FE_297e_TotalBlocksOld = 0;
	Monitor_results->FE_297e_TotalBlocksOffset = 0;
	Monitor_results->FE_297e_TotalCB = 0;
	Monitor_results->FE_297e_TotalCBOld = 0;
	Monitor_results->FE_297e_TotalCBOffset = 0;
	Monitor_results->FE_297e_TotalUCB = 0;
	Monitor_results->FE_297e_TotalUCBOld = 0;
	Monitor_results->FE_297e_TotalUCBOffset = 0;
	Monitor_results->FE_297e_BER_Reg = 0;
	Monitor_results->FE_297e_BER_U32 = 0;
	/*Monitor_results->FE_297e_Saturation = 0;*/
	Monitor_results->FE_297e_WaitingTime = 0;
	ChipSetField(F297e_BERT_ON,1);	/* restart a new BER count */

}

S32 FE_297e_GetRFLevel( void)
{
	S32 rfLevel = 0;
	S32 RfAgcPwm = 0, IfAgcPwm = 0;
	U8 i;
	
	RfAgcPwm = ChipGetField(  F297e_AGC_RF_PWMCMD_LO); /* LO to be read first then HI, HI is buffered when LO is read*/
	RfAgcPwm = RfAgcPwm + (ChipGetField(  F297e_AGC_RF_PWMCMD_HI) << 8); /*2^8 = 256*/
	
	if(RfAgcPwm>=2048)
		{
			RfAgcPwm -=2048;
		}
	else
		{
			RfAgcPwm +=2048;
		}
	RfAgcPwm = 100 * RfAgcPwm / 4095;
	
			IfAgcPwm = ChipGetField(  F297e_AGC_IF_PWMCMD_LO);
			IfAgcPwm = IfAgcPwm + (ChipGetField(  F297e_AGC_IF_PWMCMD_HI) << 8);
			if(IfAgcPwm>=2048)
			{
				IfAgcPwm -=2048;
			}
			else
			{
				IfAgcPwm +=2048;
			}
			IfAgcPwm = 100 * IfAgcPwm / 4095;
	

	/*For DCT7044 on NIM*/
	if(RfAgcPwm<90  && IfAgcPwm<28)
		{
			for(i=0;i<RF_LOOKUP_TABLE_SIZE;i++)
			{
				if(RfAgcPwm<=FE_297e_RF_LookUp1[0][i])
					{
						rfLevel = (-1) * FE_297e_RF_LookUp1[1][i];
						break;
					}
			}
			if(i==RF_LOOKUP_TABLE_SIZE) rfLevel = -56;
		}
	else   /*if IF AGC>10*/
		{			
			for(i=0;i<RF_LOOKUP_TABLE2_SIZE;i++)
			{
				if(IfAgcPwm <= FE_297e_RF_LookUp2[0][i])
					{
						rfLevel = (-1) * FE_297e_RF_LookUp2[1][i];
						break;
					}
			}
			if(i==RF_LOOKUP_TABLE2_SIZE) rfLevel = -72;
		}

	return rfLevel;
}

/*****************************************************
--FUNCTION	::	FE_297e_GetCarrierToNoiseRatio_u32
--ACTION	::	Return the carrier to noise of the current carrier in integer
--PARAMS IN	::	NONE	
--PARAMS OUT::	NONE
--RETURN	::	C/N of the carrier, 0 if no carrier 
--***************************************************/
U32 FE_297e_GetCarrierToNoiseRatio_u32(FE_297e_Modulation_t QAMSize, U32 *rpui_SNR)
{
	U32 noisedb=0;

	U32 regval=0,temp;
	int power, i;
	switch(QAMSize)
	{
		case FE_297e_MOD_QAM4:
			power = 21904;
			break;
		case FE_297e_MOD_QAM16:
			power = 20480;
			break;
		case FE_297e_MOD_QAM32:
			power = 23040;
			break;
		case FE_297e_MOD_QAM64:
			power = 21504;
			break;
		case FE_297e_MOD_QAM128:
			power = 23616;
			break;
		case FE_297e_MOD_QAM256:
			power = 21760;
			break;
		case FE_297e_MOD_QAM512:
			power = 1;
			break;
		case FE_297e_MOD_QAM1024:
			power = 21280;
			break;
		default:
			power = 1;
			break;
	}
	for (i=0;i<10;i++)
	{
		regval += ChipGetField(F297e_SNR_LO) + 256*ChipGetField(F297e_SNR_HI);
	}
	if (regval != 0)
	{
		regval/=10; /*for average over 10 times in for loop above*/
		temp=power*PowOf2(3+ChipGetField(F297e_SNR_PER) ) ;
		temp /= regval;
		#ifdef ST_OSLINUX
		noisedb =  (U32)( 10 * (Log10Int( temp ) ) );
		#endif
		
		#if defined(ST_OS20) || defined(ST_OS21)
		noisedb =  (U32)( 10 * (log10( temp ) ) );
		#endif		
	}
	else
		noisedb = 38;   /*no noise!*/

	if(noisedb>=37) return 100;               /*C/N 21dB is reference going till 48dB for QAM64*/
	if(noisedb>=36)  return 93;
	if(noisedb>=35)  return 86;
	if(noisedb>=34)  return 79;
	if(noisedb>=33)  return 72;
	if(noisedb>=32)  return 65;
	if(noisedb>=31)  return 58;
	if(noisedb>=30)  return 50;
	if(noisedb>=29)  return 43;
	if(noisedb>=28)  return 40;
	if(noisedb>=27)  return 36;
	if(noisedb>=26)  return 32;
	if(noisedb>=25)  return 29;
	if(noisedb>=24)  return 25;
	if(noisedb>=23)  return 22;
	if(noisedb>=22)  return 14;
	if(noisedb>=21)  return 7;

	*rpui_SNR = noisedb;
	return 0;

/*
C/N (Mod)	C/N (Measured)	Q
Off			38
48			38	    		100%

46			37				93

44			36				86

42			35				79

40			34				72

38			33				65

36			32				58

34			31				50

32			30				43

30			29				36

28			27				29

26			25				22

24			23				15
23			22				
22.7    	22				07
xxx			21				0%
*/

}


/*****************************************************
--FUNCTION	::	FE_297e_Algo
--ACTION	::	Driver functio of the STB0297E chip
--PARAMS IN	::	pInit	==>	Demod handle
--							Tuner handle 
							Search frequency 
							Symbolrate
							QAM Size
							DerotOffset
							SweepRate
							Search Range
							Master clock
							ADC clock
							Structure for result storage
--PARAMS OUT::	NONE
--RETURN	::	Handle to STB0297E
--***************************************************/
FE_297e_SIGNALTYPE_t FE_297e_Algo(FE_297e_InternalParams_t *Params)
{
	FE_297e_SIGNALTYPE_t signalType=FE_297e_NOAGC;	/* Signal search status initialization */
	U32 QAMFEC_Lock, QAM_Lock, u32_tmp;
	U32 LockTime, TRLTimeOut, AGCTimeOut, CRLSymbols, CRLTimeOut, EQLTimeOut, DemodTimeOut, FECTimeOut;
	

	/* Timeouts calculation */
	/* A max lock time of 25 ms is allowed for delayed AGC */
	AGCTimeOut = 25;
	/* 100000 symbols needed by the TRL as a maximum value */
	TRLTimeOut = 100000000/Params->SymbolRate_Bds;
	/* CRLSymbols is the needed number of symbols to achieve a lock within [-4%, +4%] of the symbol rate.
	   CRL timeout is calculated for a lock within [-SearchRange_Hz, +SearchRange_Hz].
	   EQL timeout can be changed depending on the micro-reflections we want to handle.
	   A characterization must be performed with these echoes to get new timeout values.
	*/
	switch (Params->QAMSize)
	{
		case FE_297e_MOD_QAM16:
			CRLSymbols = 150000;
			EQLTimeOut = 100;
		break;
		case FE_297e_MOD_QAM32:
			CRLSymbols = 250000;
			EQLTimeOut = 100;
		break;
		case FE_297e_MOD_QAM64:
			CRLSymbols = 200000;
			EQLTimeOut = 100;
		break;
		case FE_297e_MOD_QAM128:
			CRLSymbols = 250000;
			EQLTimeOut = 100;
		break;
		case FE_297e_MOD_QAM256:
			CRLSymbols = 250000;
			EQLTimeOut = 100;
		break;
		default:
			CRLSymbols = 200000;
			EQLTimeOut = 100;
		break;
	}
	if (Params->SearchRange_Hz < 0)	Params->SearchRange_Hz = -Params->SearchRange_Hz;
	CRLTimeOut = (25*CRLSymbols*(Params->SearchRange_Hz/1000))/(Params->SymbolRate_Bds/1000);
	CRLTimeOut = (1000*CRLTimeOut)/Params->SymbolRate_Bds;
	/* Timeouts below 50ms are coerced */
	if (CRLTimeOut <50)	CRLTimeOut = 50;
	/* A maximum of 100 TS packets is needed to get FEC lock even in case the spectrum inversion needs to be changed.
	   This is equal to 20 ms in case of the lowest symbol rate of 0.87Msps
	*/
	FECTimeOut = 20;
	DemodTimeOut = AGCTimeOut + TRLTimeOut + CRLTimeOut + EQLTimeOut;


	/* Reset the TRL to ensure nothing starts until the
		AGC is stable which ensures a better lock time
	*/

	ChipSetOneRegister(R297e_CTRL_1,0x04);
	
	/* Set AGC accumulation time to minimum and lock threshold to maximum in order to speed up the AGC lock */
	ChipSetField(F297e_AGC_IF_BWSEL,8);
	ChipSetField(F297e_AGC_RF_BWSEL,2);
	ChipSetField(F297e_AGC_ACCUMRSTSEL,0);
	
	/* Modulus Mapper is disabled */
	ChipSetField(F297e_MODULUSMAP_EN,0);
	/* Disable the sweep function */
	ChipSetField(F297e_SWEEP_EN,0);
	/* The sweep function is never used, Sweep rate must be set to 0 */
	
	/* Set the derotator frequency in Hz */
	FE_297e_SetDerotFreq(Params->AdcClock_Hz,(U32)(1000*(Params->IF)+Params->DerotOffset_Hz));
	/* Set sweep rate */
	FE_297e_SetSweepRate(Params->AdcClock_Hz,Params->SymbolRate_Bds,0,Params->QAMSize); 
	/* Set Sweep range */
	FE_297e_SetSweepRange(Params->AdcClock_Hz,Params->SymbolRate_Bds,0); 

	/* Disable the Allpass Filter when the symbol rate is out of range */
	if(( (Params->SymbolRate_Bds) > 10800000)|( (Params->SymbolRate_Bds) < 1800000))
	{
		ChipSetField(F297e_ADJ_EN,0);
		ChipSetField(F297e_ALLPASSFILT_EN,0);
	}

	/* Check if the tuner is locked */
#if 0	
	Error = tuner_tdrv_IsTunerLocked(&TunerLock);
	if (TunerLock == 0)
	{
		return FE_297e_NOTUNER;
	}
#endif	
	/* Release the TRL to start demodulator acquisition */
	/* Wait for QAM lock */		
	LockTime=0;
	ChipSetOneRegister(R297e_CTRL_1,0x00);
	
	do
	{
		QAM_Lock = ChipGetField(F297e_FSM_STATUS);
		if ((LockTime >= (DemodTimeOut - EQLTimeOut)) && (QAM_Lock == 0x04))
			/* We don't wait longer, the frequency/phase offset must be too big */
			LockTime = DemodTimeOut;
		else if ((LockTime >= (AGCTimeOut + TRLTimeOut))&&(QAM_Lock == 0x02))
			/* We don't wait longer, either there is no signal or it is not the right symbol rate or it is an analog carrier */
		{
			LockTime = DemodTimeOut;
			u32_tmp = 	ChipGetField(F297e_AGC_PWR_WORD_LO)
						+(ChipGetField(F297e_AGC_PWR_WORD_ME)<<8)
						+(ChipGetField(F297e_AGC_PWR_WORD_HI)<<16); 
			if (u32_tmp>=131072)
				u32_tmp = 262144 - u32_tmp;
			u32_tmp=u32_tmp/(PowOf2(11-ChipGetField(F297e_AGC_IF_BWSEL)));
		
			if(u32_tmp<ChipGetField(F297e_AGC_PWRREF_LO)+256*ChipGetField(F297e_AGC_PWRREF_HI) - 10)
				QAM_Lock = 0x0f;
		}
		else
		{
			STOS_TaskDelay(ST_GetClocksPerSecond()/100 ); /*wait 10 ms*/
			LockTime +=10;
		}
	}
	while(((QAM_Lock != 0x0c)&&(QAM_Lock != 0x0b)) && (LockTime<DemodTimeOut));
	
	if ((QAM_Lock == 0x0c)||(QAM_Lock == 0x0b))
	{
		/* Wait for FEC lock */		
		LockTime = 0;
		do
		{
			STOS_TaskDelay(ST_GetClocksPerSecond()/200 ); /*wait 5 ms*/
			LockTime +=5;
			QAMFEC_Lock = ChipGetField(F297e_QAMFEC_LOCK);
		}
		while(!QAMFEC_Lock && (LockTime<FECTimeOut));	
	}
	else
		QAMFEC_Lock = 0;
	

	if(QAMFEC_Lock)
	{
		signalType = FE_297e_DATAOK;
		Params->Results.Modulation = Params->QAMSize;
		Params->Results.SpectInversion = ChipGetField(F297e_QUAD_INV);
		Params->Results.Frequency_Khz = (Params->Results.Frequency_Khz) - FE_297e_GetDerotFreq(Params->AdcClock_Hz)+(Params->IF);
		Params->Results.SymbolRate_Bds = FE_297e_GetSymbolRate(Params->MasterClock_Hz);
		
		/* Set the AGC control values to tracking values */
	    ChipSetField(F297e_AGC_IF_BWSEL,5);
	    ChipSetField(F297e_AGC_RF_BWSEL,0);
    	ChipSetField(F297e_AGC_ACCUMRSTSEL,3);
	}
	else
	{
		switch(QAM_Lock)
		{
			case 0:
				signalType = FE_297e_NOAGC;
				break;
			case 1:
				signalType = FE_297e_NOAGC;
				break;
			case 2:
				signalType = FE_297e_NOTIMING;
				break;
			case 3:
				signalType = FE_297e_TIMINGOK;
				break;
			case 4:
				signalType = FE_297e_NOCARRIER;
				break;
			case 5:
				signalType = FE_297e_CARRIEROK;
				break;
			case 7:
				signalType = FE_297e_NOBLIND;
				break;
			case 8:
				signalType = FE_297e_BLINDOK;
				break;
			case 10:
				signalType = FE_297e_NODEMOD;
				break;
			case 11:
				signalType = FE_297e_DEMODOK;
				break;
			case 12:
				signalType = FE_297e_DEMODOK;
				break;
			case 13:
				signalType = FE_297e_NODEMOD;
				break;
			case 14:
				signalType = FE_297e_NOBLIND;
				break;
			case 15:
				signalType = FE_297e_NOSIGNAL;
				break;
			default:
				break;
		}

	}
	Params->Results.SignalType = signalType;
	
	return signalType;
}

/*****************************************************
--FUNCTION	::	FE_297e_Search
--ACTION	::	Search for a valid channel
--PARAMS IN	::	Handle	==>	Front End Handle
				pSearch ==> Search parameters
				pResult ==> Result of the search
--PARAMS OUT::	NONE
--RETURN	::	Error (if any)
--***************************************************/
FE_297e_Error_t	FE_297e_Search(FE_297e_SearchParams_t *pSearch, FE_297e_SearchResult_t	*pResult)
{
	FE_297e_Error_t error = FE_297e_NO_ERROR;
	FE_297e_InternalParams_t pIntParams;
	CH_TunerType_t    TunerType;
	
	U32 ZigzagScan = 0;
	S32 RangeOffset;
	int   i_zagtimes =0 ;

	TunerType = ch_Tuner_GetTunerType();
	
	pIntParams.Crystal_Hz = pSearch->ExternalClock;
	pIntParams.Frequency_Khz = pSearch->Frequency_Khz;
	pIntParams.SymbolRate_Bds = pSearch->SymbolRate_Bds;
	pIntParams.MasterClock_Hz = FE_297e_GetMclkFreq(pSearch->ExternalClock);
	pIntParams.AdcClock_Hz = FE_297e_GetADCFreq(pSearch->ExternalClock);
	pIntParams.SearchRange_Hz = pSearch->SearchRange_Hz;
	pIntParams.SweepRate_Hz = pSearch->SweepRate_Hz; /* sweep not in use presently */
	pIntParams.QAMSize = pSearch->Modulation;
	pIntParams.State = FE_297e_NOAGC;
	pIntParams.BaseFreq_Khz = 0;
	
	switch (TunerType)
	{
	#if 0
/*20080114 add PHILIPS CD11XX tuner*/	
	       case 	TUNER_PLL_CD11XX :  
		case      TUNER_PLL_CD1616LF  : 	
                           	pIntParams.IF = 36130;
				break;					
/***********************/	
#endif
		default:
			pIntParams.IF = 36000;
			break;
	}
	
	pIntParams.Results.SignalType = FE_297e_NOAGC;
	pIntParams.Results.Frequency_Khz = 0;
	pIntParams.Results.SymbolRate_Bds = 0;
	
	
	if((pSearch != NULL) && (pResult != NULL))
	{
		tuner_tdrv_SetFrequency(pIntParams.Frequency_Khz);
		/* Tuner Frequency Setting */
		
		/* Sets the QAM size and all the related parameters */
		FE_297e_SetQamSize(  pSearch->Frequency_Khz, pSearch->Modulation);
		/* Sets the symbol and all the related parameters */
		FE_297e_SetSymbolRate(pIntParams.AdcClock_Hz,pIntParams.MasterClock_Hz,pSearch->SymbolRate_Bds,pSearch->Modulation);

		/* Zigzag Algorithm test */
		RangeOffset = pSearch->SearchRange_Hz;
		if(25*RangeOffset > pSearch->SymbolRate_Bds)
		{
			RangeOffset = -(S32)(pSearch->SymbolRate_Bds)/25;
			ZigzagScan = 1;
		}
		pIntParams.DerotOffset_Hz = 0;
		
		/* Search algorithm launch, [-1.1*RangeOffset, +1.1*RangeOffset] scan */
		pIntParams.SearchRange_Hz = RangeOffset; /*(110*RangeOffset)/100;*/
		pIntParams.State = FE_297e_Algo( &pIntParams);

		if(ZigzagScan&&(pIntParams.State!=FE_297e_DATAOK))
		{
			do
			{
				RangeOffset = -RangeOffset;
				if(RangeOffset>0)
					pIntParams.DerotOffset_Hz = -(pIntParams.DerotOffset_Hz) + RangeOffset;
				else
					pIntParams.DerotOffset_Hz = -(pIntParams.DerotOffset_Hz);

				/* Search algorithm launch, [-1.1*RangeOffset, +1.1*RangeOffset] scan */
				pIntParams.SearchRange_Hz = RangeOffset; /*(110*RangeOffset)/100;*/
				pIntParams.State = FE_297e_Algo(  &pIntParams);
				i_zagtimes ++;
				if(i_zagtimes >20)
					{
					        do_report(0,"zag timeout\n");
                                          break;
					}

			}
			while((( (pIntParams.DerotOffset_Hz)+RangeOffset)>=-(S32)pSearch->SearchRange_Hz)&&(pIntParams.State!=FE_297e_DATAOK));
		}
		
		/* check results */
		if( (pIntParams.State == FE_297e_DATAOK) )
		{
			/* update results */
			pResult->Locked = (pIntParams.State == FE_297e_DATAOK)?TRUE:FALSE;
			pResult->Frequency_Khz = pIntParams.Results.Frequency_Khz;			
			pResult->SymbolRate_Bds = pIntParams.Results.SymbolRate_Bds;										
			pResult->SpectInv = pIntParams.Results.SpectInversion;
			pResult->Modulation = pIntParams.Results.Modulation;
		}
		else
		{
			pResult->Locked = FALSE;
			error = FE_297e_SEARCH_FAILED;
		}
	}
			else
				error = FE_297e_BAD_PARAMETER;

	return error;
}


/*****************************************************
--FUNCTION	::	FE_297e_GetSignalInfo
--ACTION	::	Return informations on the locked channel
--PARAMS IN	::	Handle	==>	Front End Handle
--PARAMS OUT::	pInfo	==> Informations (BER,C/N,power ...)
--RETURN	::	Error (if any)
--***************************************************/
FE_297e_Error_t	FE_297e_GetSignalInfo(FE_297e_SignalInfo_t	*pInfo)
{
	FE_297e_Error_t error = FE_297e_NO_ERROR;
	
	FE_297e_InternalParams_t	pParams; /*only for getting results*/
	
		pInfo->Locked = ChipGetField(F297e_QAMFEC_LOCK);
		
		if(pInfo->Locked)
		{			
			FE_297e_ClearCounters(&pParams.Monitor_results);
			pInfo->Modulation = ChipGetField(F297e_QAM_MODE);
			pInfo->SpectInversion = ChipGetField(F297e_QUAD_INV);
			pInfo->Power_dBmx10 = FE_297e_GetRFLevel();
			pInfo->CN_dBx10 = FE_297e_GetCarrierToNoiseRatio_u32(ChipGetField(F297e_QAM_MODE), &(pInfo->SNR));
#if 0		/*20080114 add beijing */	
		
			/*wait 500ms then read BERcount*/
			STOS_TaskDelay(ST_GetClocksPerSecond()/2);
			FE_297e_GetErrorCount(pInfo->Modulation,pInfo->SymbolRate,&(pParams.Monitor_results));

			pInfo->BER = pParams.Monitor_results.FE_297e_BER_U32;
#endif
		}		
	return error;
}

